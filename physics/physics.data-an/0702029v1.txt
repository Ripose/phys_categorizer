7
0
0
2
 
b
e
F
 
4
 
 
]
n
a
-
a
t
a
d
.
s
c
i
s
y
h
p
[
 
 
1
v
9
2
0
2
0
7
0
/
s
c
i
s
y
h
p
:
v
i
X
r
a

Correlation of coming limit price with order
book in stock markets

Jun-ichi Maskawa a,b

aDepartment of Management Information, Fukuyama Heisei University,
Fukuyama, Hiroshima 720-0001, Japan
bNiCT, 2-2-2 Hikaridai Seiki-cho Soraku-gun, Kyoto 619-0288, Japan (ATR)

Abstract

We examine the correlation of the limit price with the order book, when a limit order
comes. We analyzed the Rebuild Order Book of Stock Exchange Electronic Trading
Service, which is the centralized order book market of London Stock Exchange. As
a result, the limit price is broadly distributed around the best price according to
a power-law, and it isn’t randomly drawn from the distribution, but has a strong
correlation with the size of cumulative unexecuted limit orders on the price. It was
also found that the limit price, on the coarse-grained price scale, tends to gather
around the price which has a large size of cumulative unexecuted limit orders.

Key words: Limit order, Order book, Stock market, Data analysis
PACS: 07.05.Kf, 89.65.Gh

1 Introduction

The fat tail of the price ﬂuctuation and the long memory of the volatility
are common features observed in ﬁnancial markets employing the continuous
double auction as the mechanism for price formation [1,2,3,4]. The origin of
such features is an important problem to be solved in econophysics and ﬁnance,
and still under debated. Many models that give rise to one of those or both
features have been proposed [5].

Among those models, Maslov has studied a simple model of markets driven
by continuous double auctions [6]. In his model, traders choose one from the
two types of orders at random. One is a market order to sell or buy at the

Email address: maskawa@heisei-u.ac.jp (Jun-ichi Maskawa).

Preprint submitted to Elsevier

2 February 2008

best available price at the time when the trader places the order. The other
is a limit order to sell or buy with the speciﬁcation of the limit price, which
is the worst allowable price for the trader. A new limit order to sell (buy) is
placed above (below) the current market price with a random oﬀset drawn
from a uniform distribution in a given interval. The size of order is ﬁxed for
simplicity. Numerical simulation has shown that the distribution of the price
ﬂuctuation generated by this model has a power-law tail, and the volatility has
a long range correlation. Although his model has some unsatisfactory details
about the statistics of the price ﬂuctuation [7], the approach of microscopic
market models to this problem is convincing, because they describe the actual
process of price formation from the ultimate microscopic description level.
Several authors have proposed the market models in the same class [8,9,10].

The way traders select a limit price is random and non-strategic in Maslov’s
model. It is a simpliﬁcation of the actual way of traders to select a limit order.
In the paper [10], traders are assumed to be mimetic, and prefer the limit
price which has a large stock of limit orders, when they place limit orders.
Incorporating this tendency of coming limit price into the microscopic model
of stock market, the author reproduces the price ﬂuctuation with the more
real statistics depending on the parameter of the model.

In this paper, we empirically examine the correlation of the limit price with the
condition of order book at the time when a limit order comes. We analyze the
Rebuild Order Book of Stock Exchange Electronic Trading Service (SETS),
which is the centralized order book market of London Stock Exchange. As a
result, the selected limit price is broadly distributed according to a power-law,
and it isn’t randomly drawn from the distribution, but has a strong correlation
with the size of cumulative unexecuted limit orders on the price. It was also
found by the price scale transformation of the conditional probability that the
limit price, on the coarse-grained price scale, tends to gather around the price
which has a large size of cumulative unexecuted limit orders.

2 Rebuild Order Book and our data

We analyze the Rebuild Order Book of SETS. In this section, we give a brief
description of the Rebuild Order Book and our data. SETS is fully automated
order book trading service of London Stock Exchange [11]. The order book
holds details of all orders. A coming new order to sell or buy will be fully or
partially executed against existing orders on the order book, if both require-
ments agree. The unexecuted portion of the order will be stored on the order
book. The Rebuild Order Book is composed of 3 ﬁles. Order detail ﬁle contains
details of new orders, their prices, sizes and so on. Order history ﬁle contains a
history of each order and the method by which it is removed, that is, deletion,

2

expiry, partial match and full match. Trade report contains details of every
trade, that is, the price, the size and so on. Merge of these ﬁles and sort of
records by the time stamp enable us to pursue the occurrence and the change
of each order.

We study the Rebuild Order Book of the 6 months since July to December in
2004. Our data contains all orders and transactions of the selected 13 stocks
listed on SETS. The selected stocks are most actively traded in the period,
which are the stocks of top 13 bargains in July 2004. There are millions of limit
orders, cancellations and executions in our data. The stocks we analyzed are
Astrazeneca (AZN), Barclays (BARCS), BT Group (BT), BP. (BP), Diageo
(DGE), Glaxosmithkline (GSK), HBOS (HBOS), HSBA HLDGS (HSBA),
Lloyds Tsb Group (LLOY), Shell Tranport & Trading Co. (SHEL), Tesco
(TSCO), Royal Bank Scot (RBS) and Vodafone Group (VOD), belonging to
various industries, that is, bank, beverages, oil & Gas, telecommunication
services and so on.

3 Results of data analysis and discussions

The purpose of this paper is to examine the correlation of the limit price
with the condition of order book at the time when a limit order comes. In
this section, we report some results of analysis on the data described in the
previous section.

First of all, we show that the coming limit price is broadly distributed around
the best price at the time when the order comes. Figure 1 is the semi-log plot
of the probability distribution function of relative limit price: price − ask (for
sell limit orders), bid−price (for buy limit orders). The unit of price is the tick
size of each stock. The inset is the log-log plot of the cumulative distribution
function for limit orders placed on the book. The exponent of the power-law
tail of the relative limit price for orders placed on the book is near -1.5, and
the value is consistent with the previous work of this kind [12].

Second, we examine the correlation of the selection of limit price with the
cumulative size of unexecuted limit orders at each price. Let us consider a
situation of the order book. There may be several prices at which unexecuted
limit orders are stored. Each price may hold a fraction of whole unexecuted
orders. Then, which price will be selected as a coming limit price? Figure
2 shows the conditional probability Pf that a coming limit order is placed
at the price holding a given fraction f of all limit orders. In both sides of
order, The conditional probability Pf decreases with fraction f while f is
smaller than about 0.4, and increases with f while f is smaller than about
0.6. The cumulative size of unexecuted limit orders at each price inﬂuences the

3

probability of the selection of the price. However, the conditional probability
is not a monotonically increasing function of f .

Next, we perform the scale transformation of price, and renormalize the con-
ditional probability. We group the relative price 2i and 2i + 1 into the group
i, where the relative price i = ..., −2, −1, 0, 1, 2, ... is deﬁned by the equation
i = price − ask and i = bid − price for sell and buy orders respectively. On
the coarse-grained price scale, we call the group 0 the best price (ask/bid),
and the group i the relative price i again. Repeating this procedure k-times,
we have the scale transformation of the relative price, i(k) = 2ki. When the
stochastic variable F k
i denote the cumulative size of limit order at the price
i = 0, 1 the selection of the price i(k),
i(k) and the binary stochastic variable Sk
the renormalization of the conditional probability for each price is deﬁned by
the equation:

P
k−1
2i +f

f

k−1
2i+1=f

=

P (Sk

i = 1|F k

i = f ) =

P (Sk−1

2i = 1 ∪ Sk−1

2i+1 = 1, F k−1

2i = f k−1

i = f )

P (Sk

i = 1, F k
P (F k
2i ∩ F k−1

i = f )
2i+1 = f k−1
2i+1)

P
k−1
2i +f

f

k−1
2i+1=f

P (F k−1

2i = f k−1

2i ∩ F k−1

2i+1 = f k−1
2i+1)

. (1)

P (F k

f = P
i

The conditional probability P k
by the weighted average P k

f , on the coarse-grained price scale, is expressed
i = f ).
The results for k = 0 to 5 (k = 0 means the original price scale) are shown in
Fig. 3. On the coarse-grained price scales k ≥ 1, the conditional probabilities
are monotonically increasing function of f . It means that the limit price, on
the coarse-grained price scale, tends to gather around the price which has a
large size of cumulative unexecuted limit orders.

i = f | ∪j F k

j = f )P (Sk

i = 1|F k

i = 1| Pi>0 F k

i = 1| Pi>0 F k

i = f ) and P (∪i<0Sk

0 = 1 − f ) + P (∪i>0Sk

Finally, we study the dependency of the conditional probability on the relative
price i(k). We divide the whole prices into three groups, i(k) = 0 (the best
price), i(k) > 0 (prices on the book) and i(k) < 0 (prices in the spread),
and derive the corresponding conditional probabilities P (Sk
0 = 1|F k
0 = f ),
P (∪i>0Sk
0 = f ). The conditional
probability P (∪i>0Sk
0 =
1|F k
0 = 1 − f ) =
1. The results for sell and buy order on the price scale i(5) = 25i (k = 5)
are shown in Fig. 4. The unconditional probability that traders select the
group is also shown by the horizontal line. On this coarse-grained price scale,
each price contains 32 original price levels. In the region of f close to 1,
the conditional probability that traders select the prices separate from the
best price by over 32 original price levels is hundreds times as large as the
unconditional probability, which is tiny. In the region f < 0.07, the inequality

i = f ) is derived from the equation P (Sk

i = f ) + P (∪i<0Sk

i = 1| Pi>0 F k

i = 1|F k

i = 1|F k

4

i = 1|F k

i = 1|F k

0 = f ) < P (∪i>0Sk

P (∪i≤0Sk
0 = f ) holds, which means the
state such that the stored limit orders are sparse within the distance of 31
original price levels from the best price is stable. As is shown by the simulation
in the paper [10], such unequal attractive power of prices has ampliﬁed the
ﬂuctuation of gaps between occupied price levels, and cause the power-law
ﬂuctuation of price changes and the long memory of the volatility. This result
agrees with the statement by Farmer et al. in the paper [13]. They has argued
that large returns are not caused by large orders, while the large gaps between
the occupied price levels on the order book lead to large price changes in each
transaction.

4 Conclusions

We have analyzed the Rebuild Order Book of SETS, which is fully automated
order book trading service of London Stock Exchange in order to examine
the correlation of the limit price with the condition of order book at the time
when a limit order comes.

We have found that there is a obvious correlation. Especially on the coarse-
grained price scale, our data clearly shows that the limit price tends to gather
around the price at which a large size of unexecuted limit orders has been
stored. Such unequal attractive power of prices is a promising candidate for
the origin of the fat tail of the price ﬂuctuation and the long memory of the
volatility.

This work was supported by the Japan Society for the Promotion of Science
under the Grant-in-Aid, No. 15201038.

References

[1] P. Gopikrishnan, M. Meyer, L. A. N. Amaral and H. E. Stanley, Inverse Cubic
Law for the Distribution of Stock Price Variations, Eur. Phys. J. B 3 (1998)
139.

[2] V. Plerou, P. Gopikrishnan, L. A. N. Amaral, M. Meyer, H. E. Stanley, Scaling
of the distribution of price ﬂuctuations of individual companies, Phys. Rev. E
60, (1999) 6519.

[3] Y. Liu, P. Gopikrishnan, Cizeau, Meyer, Peng, H. E. Stanley, Statistical
properties of the volatility of price ﬂuctuations, Phys. Rev. E 60, (1999) 1390.

[4] Cont, R., Empirical properties of asset returns: stylized facts and statistical

issues, Quantitative Finance 1 (2001) 223.

5

[5] J.-P. Bouchaud, M. Potters, Theory of Financial Risk and Derivtive Pricing,
2nd edition, Cambridge University Press, Cambridge, 2003 and references
therein.

[6] S. Maslov, Simple model of a limit order-driven market, Physica A 278 (2000)

571.

[7] The exponent of the power-law tail of price ﬂuctuations generated by Maslov’s
model is inside the Levy stable region, while the observed value in actual
markets is close to -3 [1,2]. In addition, the Hurst exponent of the price diﬀusion
is H = 1/4 ( under diﬀusive) , regardless of the range of time window. In actual
markets, we have H = 1/2 for long-term, which is the value for free diﬀusion.

[8] D. Challet, R. Stinchcombe, Non-constant rates and over-diﬀusive prices in a

simple model of limit order market, Quantitative Finance 3 (2003) 155.

[9] E. Smith, J. D. Farmer, L. Gillemot, S. Krishnamurthy, Statistical theory of

the continuous double auction, Quantitative Finance 3 (2003) 481.

[10] J. Maskawa, Stock price ﬂuctuations and the mimetic behaviors of traders, 2006,

http://arXiv.org/abs/physics/0607202.

[11] London Stock Exchange, Guide to Trading Services, 2006, available at

http://www.londonstockexchange.com/.

[12] I. Zovko, J. D. Farmer, The power of patience: a behavioral regularity in limit-

order placement, Quantitative Finance 2 (2002) 387.

[13] J. D. Farmer, L. Gillemot, F. Lillo, S. Mike, A. Sen, What really causes large

price change?, Quantitative Finance 4 (2004) 383.

6

100

10−2

10−4

10−6

F
D
P

100

10−2

F
D
C

10−4

10−6

−1.5

100

102

104

Limit price − Best price

Sell order
Buy order

0

200
Limit price − Best price

400

Fig. 1. Probability distribution function of the relative limit price. The unit of
price is the tick size of each stock. The inset is the log-log plot of the cumulative
distribution function for limit orders placed on the book. The dashed-line represents
the power-law with the exponent -1.5.

(a)

(b)

0.4

0.2

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

0

0

0.5

Fraction

1

0

0

0.5

Fraction

1

Fig. 2. Conditional probability that a coming limit order is placed at the price
holding a given fraction f . The error bar represents 95 % conﬁdential interval.
(a)Sell order. (b)Buy order.

0.4

0.2

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

7

1

(a)

1

(b)

k=0
k=1
k=2
k=3
k=4
k=5

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

0.5

k=0
k=1
k=2
k=3
k=4
k=5

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

0.5

0

0

0.5

Fraction

1

0

0

0.5

Fraction

1

Fig. 3. Conditional probability on diﬀerent price scales (k = 0 to 5). The parameter
k is explained in text. (a)Sell order. (b)Buy order.

1

Sell order k=5

1

Buy order k=5

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

0.5

Price = ask
Price > ask
Price < ask

Price = bid
Price < bid
Price > bid

.

b
o
r
p

 
l
a
n
o
i
t
i
d
n
o
C

0.5

0

0

0.5

Fraction

1

0

0

0.5

Fraction

1

Fig. 4. Conditional probability on a coarse-grained price scale (k = 5). Prices are
divided into three groups, the best price, prices on the book and prices in the spread.
The horizontal axis for the prices in the spread is the fraction f of limit orders held
at the best price. The horizontal line for each group represents the unconditional
probability that traders select the group.

8

