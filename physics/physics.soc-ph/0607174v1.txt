‡

Luca De Sanctis† and Tobias Galla†‡

The Abdus Salam International Center for Theoretical Physics, Strada Costiera 11,

†
34014 Trieste, Italy
INFM-CNR, Trieste-SISSA Unit, V. Beirut 2-4, 34014 Trieste, Italy

Abstract. We study the learning dynamics of agents who adapt to heterogeneous
comfort levels in the context of an El-Farol type game, and show that even an
inﬁnitesimal degree of heterogeneity in the resource levels leads to a signiﬁcant
reduction of the ﬂuctuations of the collective action, and removes the phase transition
observed in models with homogeneous comfort level. Our analysis is based on
in particular on a generating
dynamical methods of disordered systems theory,
functional approach, and conﬁrmed by numerical experiments. We also report on
simulations of a system in which the comfort levels ﬂuctuate in time, and point
out crucial diﬀerences between models in which the comfort levels of the agents
ﬂuctuate collectively and individually respectively. Finally we comment on a possible
characterisation of El-Farol and Minority Games according to the presence or absence
of ergodicity-breaking phase transitions at inﬁnite integrated response.

6 Adapting to heterogeneous comfort levels
0
0
2
 
l
u
J
 
9
1
 
 
]
h
p
-
c
o
s
.
s
c
i
s
y
h
p
[
 
 
1
v
4
7
1
7
0
6
0
/
s
c
i
s
y
h
p
:
v
i
X
r
a

inductive agents often display a remarkably rich
Complex adaptive systems of
global behaviour, which cannot be explained straightforwardly from their microscopic
interactions. The tools of statistical mechanics have here been seen to be able to
provide further insight, and allow for theoretical progress for a variety of agent-based
models. Most notably, analytical solutions for the Minority Game (MG), a mathematical
abstraction of the El-Farol bar problem, have been obtained using equilibrium and non-
equilibrium techniques of disordered systems theory [1, 2, 3].

PACS numbers: 02.50.Le, 87.23.Ge, 05.70.Ln, 64.60.Ht

E-mail: lde sanc@ictp.it, galla@ictp.it

1. Introduction

In the El-Farol bar problem [4], N = 100 customers have to decide independently
whether or not to attend a concert in the bar, the latter having a capacity of λ = 60
seats. Agents will in general not enjoy the bar if it is too crowded, i.e.
if more than
λ agents attend. Thus depending on the attendance A, agents who go to the bar are
considered winners if A < λ, and conversely, agents who decide to stay home win if
A > λ. We will refer to λ as the comfort level in the following. Players in the El-Farol
bar problem are inductive agents: they use individual ‘predictors’, based on the past
attendance, to predict whether or not the bar will be crowded at the next time step,

Adapting to heterogeneous comfort levels

2

and according to these predictions they then decide whether to attend or not. They
learn by experience and employ the most accurate predictor which they can access.

h

A
i

Under fairly weak assumptions it can be shown that the temporal average of the
, converges to the comfort level λ in Arthur’s El-Farol model provided
attendance,
the predictors are not systematically biased [4]. A second question relates to the degree
to which agents are able to reduce the ﬂuctuations of A about λ, i.e. to the quantity
2, where the brackets denote an average over time. We will refer to σ2
σ2 =
A
i
as the volatility in the following.

i − h

A2

h

The MG in its original form [5] is a mathematical formulation of the El-Farol
problem at comfort level λ = N/2. All agents take binary decisions at each time-step,
and players in the minority group win. Predictors, ﬁxed at the beginning of the game
and randomly generated, are here unbiased in the sense that they advise to attend or stay
home with equal statistical weights. Generalisations to λ
= N/2 and/or systematically
biased strategies are possible, and have been studied by numerical simulations in [6, 7].
More systematic studies of El-Farol games with general uniform comfort levels have
been presented [8], see also [9].

In this paper we consider an El-Farol type problem with heterogeneous comfort
levels, so that each agent i prefers to attend the bar only if A < λi, where λi varies
across the population of agents. Our work is an extension of [8], and we reproduce
some results reported there as a special case. We here employ a dynamical approach
whereas the analysis of [8] is based on static replica calculations. Both approaches are
now standard in the context of MGs and related models [1, 2].

The purpose of this study is here twofold. Firstly we aim at understanding the role
of heterogeneous comfort levels for the learning dynamics of the agents. In particular
we will be concerned with the question of whether or not heterogeneity in the comfort
levels compromises the ability of the population of agents to converge to a ‘mean’ comfort
level. Similarly we will study the inﬂuence of heterogeneity in the comfort levels on the
temporal ﬂuctuations of the attendance. The second reason for studying the present
system rests in more theoretical issues related to the phase behaviour of MGs and related
models. In the standard MG a phase transition between an ergodic and a non-ergodic
regime has been found, and identiﬁed with a point in parameter space in which the
integral over the response function of the system becomes singular [2, 3]. In the non-
ergodic regime a continuum of attractors of the learning dynamics appears to be present
and introduces interesting eﬀects such as a marked sensitivity to initial conditions, which
is absent in the ergodic phase.

Some variants of the MG, however, which are typically only slight modiﬁcations of
the original game have been seen not to display the above transition. Some variants
exhibit no transition at all, others one that is of a diﬀerent type than the one described
above. The transition is absent for example in so-called grand-canonical MGs (GCMG)
[10], and similarly such an absence may be suspected for MG models with ﬁnite score
memories [11] although no analytical results are available as yet. In MGs with impact
correction [12] and dilution of the agents’ interaction matrix [13] the transition of the

6
Adapting to heterogeneous comfort levels

3

type as in the original MG is preceded by one which is referred to as ‘memory-onset’
transition [2]. Ergodicity breaking here still occurs, but at ﬁnite integrated response.
This type of transition has been associated with replica-symmetry breaking in static
studies. The second purpose of this paper is thus to try to shed some more light on the
circumstances under which MG models display a transition of the type of the original
MG. We here show that MGs with any degree of heterogeneity in the comfort levels
do not display this type of transition, and conclude with some conjectures on how the
structure of the agents’ learning dynamics may determine the presence or otherwise of
such a transition.

2. Deﬁnition of the model

}

}

}

−

0, 1

1, 1

∈ {

∈ {

∈ {

A(t)

√N

∈ {−

1, . . . , N

1, . . . , αN

√N (in steps of 2/√N). Note that in this notation (bi(t)

We consider a system of N agents, labelled with Roman indices i, j
. At
}
each round t of the game each agent i takes a binary decision bi(t)
in response
to the observation of a common piece of publicly available information, labelled by µ(t).
bi(t) = 1 may here correspond to player i attending the bar at time t, and bi(t) =
1 to
him not attending. While the information encodes the actual history (i.e. the previous
attendances) in the original version of the El-Farol problem and in the original MG,
we will here assume that µ(t) is chosen randomly and independently from a set with
P = αN possible values at any t, i.e. µ(t)
. This has been seen not to
alter the qualitative behaviour of diﬀerent variants of the MG [1, 2]. α = P/N is here
the main control parameter of the model, and taken not to scale with N. One then
deﬁnes the re-scaled total outcome at round t as A(t) = N −1/2
i bi(t), resulting in
as
≤
≤
−
for not-attending/attending the bar) an attendance of N/2 in
opposed to bi(t)
the original El-Farol problem corresponds to A = 0, and accordingly the comfort level
in an actual MG (in which the bar is considered crowded if more than precisely half of
the agents attends) would be λ = 0. Agents who prefer a bar ﬁlled by less than half
have λi < 0, agents who can enjoy the bar even if it is populated by more than N/2
attendees have λi > 0. In general the attendance in the original El-Farol problem can
be obtained as (√N A(t) + N)/2 from the global action A(t), in our conventions. Having
this simple linear transformation in mind, we will refer to A(t) as the attendance at time
t in the following, and, as mentioned above, to λi as the comfort level of player i. Note
that A(t) remains a well-deﬁned ﬁnite quantity in the thermodynamic limit N
at
α = P/N ﬁnite, with which the statistical mechanics analysis of the model is concerned.
In order to take their decisions on whether or not to attend each agent i holds two
i,a, . . . , RP
ﬁxed trading strategies (look-up tables) Ri,a = (R1
1.
The binary entries Rµ
i,a are drawn from some distribution (to be speciﬁed below) before
the start of the game; these entries (along with the comfort levels λi) represent the
quenched disorder of this problem. If agent i decides to use strategy a in round t of the
game, his action at this stage will be bi(t) = Rµ(t)
i,a . The agents decide which strategy to
use based on points pi,a(t) which they allocate to each of their strategies. These virtual

P , with a =

→ ∞

∈ {−

∈ {−

i,a)

1, 1

1, 1

P

±

}

}

Adapting to heterogeneous comfort levels

4

(1)

(2)

scores are based on the player’s potential success had he always played that particular
strategy, and are updated as follows at every time-step:

pi,a(t + 1) = pi,a(t)

Rµ(t)

i,a (A(t)

λi).

−

−

if A(t) > λi the scores of strategies a with Rµ(t)

Strategies which would have produced a decision to the liking of player i are thus
i,a < 0 are increased and
rewarded, i.e.
vice versa for A(t) < λi. In the MG literature the above type of process (1) with an
explicit dependence on the inﬂux of information patterns µ(t) is generally referred to as
‘on-line dynamics’. At each round t each player i then uses the strategy in his arsenal
with the highest score, i.e. bi(t) = Rµ(t)
i,si(t), where si(t) = arg maxa pi,a(t). It remains to
specify the statistics of the

. We here choose

Rµ

P (Rµ

i,a) =

{

i,a}

1 + ρi/√N
2

δRµ

i,a,1 +

1

−

ρi/√N
2

δRµ

i,a,−1,

· · ·

as the distribution from which the Rµ
i,a are drawn (with δx,y = 1 if x = y and δx,y = 0
otherwise), so that Rµ
i,a = ρi/√N for all a, µ (
here denotes an average over the
In the limit of large N, which we will eventually consider, the
quenched disorder).
distribution of the Rµ
If ρi > 0 then player i’s
i,a is well-deﬁned for any ρi ∈
strategies are more likely to advise him to take a positive action (bi = +1) than a
negative one, and vice versa. We will refer to i’s strategies as being consistent with his
comfort level λi if ρi = λi, and as inconsistent otherwise. For an agent with consistent
strategies the probability of him attending the bar upon randomly choosing one of his
strategies (regardless of their scores) corresponds to his comfort level. The scaling of the
comfort levels and strategy biases with N has here been chosen to ensure a well-deﬁned
thermodynamic limit, and corresponds to the choices of [8].

R.

0

In the following we will consider a population of agents in which all ρi are drawn
independently from a ﬁxed distribution Q(ρ), and the λi from R(λ). The standard MG
i, i.e. Q(ρ) = δ(ρ) and R(λ) = δ(λ). As we will see
is recovered for λi = ρi ≡
in the further analysis, the speciﬁc details of the distribution Q(ρ) are unimportant,
and the only feature relevant for the properties of the model is the mean strategy
dρQ(ρ)ρ. We will also demonstrate that the model is invariant against
bias ρ0 =
ρi + ∆
simultaneous uniform shifts of the ρi and λi, i.e. under λi →
R
R. Without loss of generality we will therefore mostly restrict to cases with
for any ∆
∈
ρ0 = 0 in the following.

λi + ∆ and ρi →

∀

of the mean attendance from the mean comfort level λ0 =
and by the ﬂuctuations of the attendance about its mean, i.e. by σ2 =

Finally the key observables we will study in this model are given by the deviation
λ0|
,
2.
A
i
here stands for an average over time in potential stationary states of the system,
h· · ·i
i.e. after some suﬃciently long equilibration time. To conclude this section we note that
that the model of [8] can be recovered upon assuming homogeneous comfort levels and
ρ0 and λi ≡
strategy biases, i.e. by setting ρi ≡

dλR(λ)λ, i.e. by

i −
i − h

λ0 for all i.

| h
A2

A

R

h

Adapting to heterogeneous comfort levels

5

3. Statistical mechanics analysis

We will here pursue a dynamical approach based on a generating functional analysis
of the score update rules. We here consider the so-called batch process of the learning
dynamics, which for the present case reads

qi(t + 1) = qi(t)

2
√N

−

ξµ
i

1
√N

"

µ
X

j
X

(cid:8)

ξµ
j sj(t) + ωµ

j

λi

+ hλi(t),(3)

−

#

(cid:9)

(cid:1)

}

−

i,−1

Rµ

Rµ

(cid:0)
∈ {−

i = 1
2

i,1 + Rµ
1, +1

pi,−1(t)) and the quantities ξµ

similar to that of the standard MG [14, 2]. We have here introduced the score
diﬀerences qi(t) = 1
2 (pi,1(t)
and
ωµ
Rµ
i = 1
, using conventions which are now standard in the MG-literature.
2
sj(t)
indicates the strategy player j is using at time t and is given by
sj(t) = sgn[qj(t)], so that player j’s action at time t reads ωµ
j sj(t) on the occurrence
of information pattern µ. hλi(t) is an external perturbation ﬁeld, which is set to zero in
all simulations and mostly a mathematical device added to generate response functions.
Perturbations are assumed to be identical for agents with identical comfort level, hence
the subscript λi. Note also that compared to the on-line process an eﬀective average
over all information patterns µ has been performed at each time-step and that time has
been re-scaled.

j + ξµ

i,1 −

i,−1

(cid:0)

(cid:1)

The above batch process is the starting point for the dynamical analysis of the
problem based on generating functionals. This technique is now standard in the context
of the MG and we will only report the ﬁnal outcome of the theory here, with some
additional information in the appendix. For the further mathematical details of the
computation in similar cases we refer to the recent textbook [2].

The generating functional analysis turns the Markovian problem of interacting
agents into a self-consistent description in terms of decoupled eﬀective agents subject to
non-Markovian stochastic processes, and is exact in the thermodynamic limit N
(at ﬁxed α = P/N). For an eﬀective agent with strategy bias λ this process reads

→ ∞

qλ(t + 1) = qλ(t)

α

(1I + G)−1

tt′ sλ(t′) + √αηλ(t) + hλ(t),

(4)

−

Xt′≤t

where the second term on the right-hand side marks a retarded interaction in time
and renders the process non-Markovian. sλ(t) is given by sλ(t) = sgn[qλ(t)] and ηλ(t)
represents the stochasticity of this process. More precisely, ηλ(t) is Gaussian noise of
zero mean, and with temporal correlations

h

ηλ(t)ηλ(t′)

i⋆ = [(1I + G)−1D(1I + GT )−1]tt′ + 2ftft′
−
t, t′, and
∀

(5)
Here 1Itt′ = δtt′ is the identity matrix and Ett′ = 1
h· · ·i⋆ refers to an average
over realisations of the eﬀective process (i.e. over realisations of the ηλ). C and G are
the correlation and response functions of the system respectively

2λ(ft + ft′) + 2λ2Ett′.

Ctt′ = lim
N→∞

N −1

si(t)si(t′)

, Gtt′ = lim
N→∞

ii

N −1

hh

i
X

si(t)
∂
ii
hh
∂hλi(t′)

(6)

i
X

6

(7)

(8)

(9)

(10)

(11)

Adapting to heterogeneous comfort levels

hh· · ·ii

with
an average over potentially random initial conditions from which the
dynamics is started. The matrix D ﬁnally is given by Dtt′ = 1 + Ctt′ for all t, t′ and we
have

These order parameters are then to be determined as averages over realisations of the
eﬀective processes and over the distribution of λ

ft =

[(1I + G)−1(ρ01I + G′)]tt′

with

Xt′

G′

tt′ = lim
N→∞

N −1

λi

si(t)
∂
ii
hh
∂hλi(t′)

.

i
X

Ctt′ =

dλR(λ)

Gtt′ =

dλR(λ)

Z

Z

G′

tt′ =

dλR(λ)λ

sλ(t)sλ(t′)
h

|

λ

i⋆

∂
∂hλ(t′) h
∂
∂hλ(t′) h

sλ(t)

λ

|

i⋆

sλ(t)

λ

|

Z

λ

h· · · |

i⋆
(where
i⋆ is an average over realisations of the eﬀective process restricted to
representative agents with comfort level λ). The further analysis then assumes the
existence of an ergodic stationary state (in which correlation and response functions
t′) and similarly for G and G′
i.e. Ctt′ = C(t
depend only on time-diﬀerences,
and in which the integrated responses remain ﬁnite) and proceeds along the lines of
[14]. We will not report these further steps here, but only quote some of the resulting
equations describing the persistent order parameters in the appendix. These time-
independent order parameters are in the present problem given by the persistent part
c = limT →∞ T −1
τ ≤T C(τ ) of the correlation function and by the integrated responses
χ =

τ G(τ ) and χ′ =

τ G′(τ ).

−

The two observables which we will focus on, namely the mean attendance and the
P
ﬂuctuations of the attendance, can be computed from the eﬀective particle problem as
follows. Similarly to [14] one ﬁnds that

P

P

[(1I + G)−1D(1I + GT )−1]tt′ + ftft′

(12)

resulting in
‡

Atii
hh

= ft,

AtAt′

=

ii

hh

1
2

A(t)2

hh

ii − hh

A(t)

=

2
ii

1
2

[(1I + G)−1D(1I + GT )−1]tt.

(13)

Temporal averages can then be expressed in terms of persistent order parameters, and
we have

1 + c
1 + χ
The former relation is exact, the second obtained within a common approximation
following the lines of [2].

σ2 =

A
i

(14)

+ 1

ρ0 + χ′
1 + χ

1
2

−

=

(cid:21)

(cid:20)

c

h

,

Note here also that

⋆ = 2
‡
i
rules of the score diﬀerence of player i.

ηλ(t)ηλ(t′)

h

hh

(At

λ)(At′

λ)

, reﬂecting the term A(t)

λi in the update

−

−

ii

−

Adapting to heterogeneous comfort levels

7

4. Results

One observes from the above eﬀective agent problem that the distribution of strategy
biases Q(ρ) enters only through its ﬁrst moment ρ0 as claimed above. Furthermore it
is straightforward to check on the level of the eﬀective process that simultaneous shifts
λi + ∆
of the distributions of ρ and λ (i.e. ρi →
R) do not eﬀect the transients or stationary states of the
with some i-independent ∆
model, and it becomes clear that strategy biases and comfort levels are fully equivalent
in the homogeneous case as already found in [8]. This is also veriﬁed in simulations.
Thus we can concentrate on the case ρ0 = 0.

i at the same time as λi →
∀

ρi + ∆

∈

4.1. Heterogeneous comfort levels at consistent strategies

We here impose consistency of the strategy biases with the individual comfort levels, i.e.
that ρi = λi for all i. If the λi are then homogeneous over the population of agents, i.e.
ρ0 for all i, then the problem can be seen to be equivalent to the standard
if λi = ρi ≡
MG with random external information [8]. Due to the invariance under uniform shifts
in the ρi and λi this equivalence of the model with homogeneous consistent strategies
to the MG holds irrespectively of ρ0.

We now turn to El-Farol games with a heterogeneous distribution of the λi and ρi,
still maintaining consistency λi = ρi. We here choose the simplest possible case, namely
a bi-modal distribution
1
2

ε) + δ(λ + ε)]

R(λ) =

[δ(λ

(15)

−

to study the eﬀects of heterogeneity in the comfort levels on the behaviour of the model,
with ε > 0 a model parameter measuring the degree of heterogeneity. ε = 0 reproduces
the standard MG.

h

R

A
i

↔ −

One ﬁrst realises that the mean attendance

is given by the mean comfort level
dλR(λ)λ = 0. In the theoretical analysis this is easily seen to be the case as
λ0 =
χ′ = 0 due to symmetry with respect to ε
ε, and is also conﬁrmed in simulations
(not shown). The magnitude of the ﬂuctuations of the attendance about this level is
shown in Fig. 1, both as a function of α at ﬁxed ε (left) and as a function of ε at
ﬁxed α (right). For ε = 0 one ﬁnds the functional dependence of σ2 on α typical of the
0.33 and both high-
well-known MG, with a minimum attained at an intermediate αc ≈
volatility and low-volatility branches at α < αc depending on initial conditions, as shown
in the left panel of Fig. 1 for comparison, with open circles marking unbiased starts
(qi(0) = 0), and ﬁlled circles starts from strongly biased initial conditions (
1).
|
One ﬁnds that σ2 diverges as α
0 for strongly
biases initial conditions [2, 3]. For α > αc the starting point of the dynamics has no
inﬂuence on the persistent order parameters in the stationary state. In the theoretical
analysis the phase transition point separating both regimes is identiﬁed as the point at
which the integrated response χ diverges, marking the breakdown of the assumptions
regarding ergodicity.

0 for unbiased starts, and that σ2

qi(0)

| ≫

→

→

Adapting to heterogeneous comfort levels

101

100

10−1

σ2

10−2

10−1

α=0.1

α=0.2

α=0.5

8

100

10−1

10−2

σ2

100
α

101

−0.2

0.2

0.6

1.4

1.8

1

ε

∀

−

i) and bi-modal distribution R(λ) = [δ(λ + ε) + δ(λ

Figure 1. (Colour on-line) Volatility for the game with consistent strategies (ρi =
ε)]/2. Left: σ2 as a function
λi
of α for diﬀerent ε = 0 (circles), ε = 1 (squares), ε = 0.5 (diamonds) and ε = 0.01
(triangles). Open symbols are from simulations of the corresponding on-line games
started from tabula rasa initial conditions qi(0) = 0 (with N = 300 agents, averages
over 50 samples are taken, simulations run for 50000 on-line steps (or more for small
ε)). Solid lines are from the analytical theory. Filled circles are for the standard
MG (ε = 0) from strongly biased initial conditions. Right: σ2 as a function of ε at
ﬁxed α = 0.1, 0.2, 0.5 (circles, squares, triangles respectively). Symbols are simulations
of the on-line process started from tabula rasa initial conditions, lines the analytical
theory in the ergodic phase. Arrows point out that there are discontinuities of σ2 at
ε

0 for α < αc but not at α = 0.5 > αc.

→

The behaviour of the model with heterogeneous (but consistent) comfort levels is
fundamentally diﬀerent. For ε > 0 all curves σ2 are found to be increasing functions of α,
and the volatility remains low at low values of α (for all values of ε tested here), as shown
in the left panel of Fig. 1. We here depict measurements from simulations (markers)
as well as the predictions of the analytical theory (lines), and ﬁnd excellent agreement.
No signiﬁcant dependence on initial conditions is found. The theoretical analysis shows
no sign of a divergence of either χ or χ′ so that we conclude that the ergodicity-broken
phase of the standard MG is absent as soon as any degree of heterogeneity is added to
the comfort levels. We have also performed an analysis along the lines of [15] to check
for a breakdown of weak long-term memory assumptions at ﬁnite integrated response,
and could ﬁnd no such a memory-onset transition. Thus the system is fully ergodic at
all α > 0 for ε > 0.

The marked diﬀerence between the models with and without heterogeneity in the
comfort levels is demonstrated in plots of σ2 versus ε at diﬀerent values of α in the right
panel of Fig. 1. For α > αc one observes a smooth dependence of σ2 on ε with no
discontinuity at ε
0 if
= 0 σ2 remains low,
simulations from zero initial conditions are considered. For all ε
whereas a substantially higher volatility is found at ε = 0. The magnitude of the jump

0. For α < αc however, a characteristic jump occurs at ε

→

→

6
Adapting to heterogeneous comfort levels

9

ergodic, |<A>−λ

0|>0

3

2

1

|

0

λ
−
0

ρ

|

non−ergodic, <A>=λ

0

0

0.0

0.1

0.2
α

0.3

0.4

Figure 2. Phase diagram of the model with homogeneous resource level and
homogeneous strategy bias (ρi
) plane.
|
Up to re-scaling the diagram is identical to that found in [8] by static methods.

λ0 for all i) in the (α,

ρ0 and λi

ρ0
|

λ0

≡

≡

−

here depends on the choice of α < αc an increases as α becomes smaller. Note that a
similar behaviour has been found in MGs with impact correction or dilution [1, 2, 13].
Finally, while we have presented results only for bimodal distributions of the
λi we note that the theory presented here straightforwardly applies to more general
distributions R(λ) as well. Simulations of the model with Gaussian R(λ) of diﬀerent
non-zero widths ε demonstrate that the phase transition is absent also in this case and
that qualitative behaviour of the model is then similar to that of the game with a bi-
modal distribution of the λi. Thus the speciﬁc distribution of the comfort levels seems
to be irrelevant as far as the absence of the phase transition is concerned, and the only
relevant factor appears to be the presence or otherwise of any type of heterogeneity.

4.2. Inconsistent strategies

|

ρ0|

λ0 −

λ0 for all i, where

= ρi. The case of uniformly inconsistent strategies
We here consider the case in which λi 6
ρ0
has been studied in [8]. In our notation the results of [8] correspond to choosing ρi ≡
and λi ≡
measures the degree of inconsistency. The resulting
phase diagram is shown in Fig. 2, and corresponds to that derived in [8] by diﬀerent
methods. The dependence only on the combination
reﬂects the equivalence of
strategy biases and comfort levels in the homogeneous case. Without loss of generality,
we will (mostly) consider the case ρ0 = 0. At any λ0 one then ﬁnds a phase transition
of the type which is observed in the standard MG, with an ergodic phase at α
αc(λ0),
and non-ergodic behaviour below αc. In the ergodic regime time-translation invariance
is maintained and the integrated response χ remains ﬁnite. The phase transition line in
(note that in the case of homogeneous strategy biases χ′ is
Fig. 2 is marked by χ

λ0 −

ρ0|

≥

|

→ ∞

Adapting to heterogeneous comfort levels

10

a multiple of χ so that a divergence of χ′ is equivalent to one of χ).

h

h

A
i

A
i

It is here interesting to study the convergence of the mean attendance

A
to the
i
h
= λ0 below αc, but
mean comfort level λ0. As shown in [8], one ﬁnds that indeed
= 0, for λ0 = 0 one always has
not above (if λ0 6
= 0 by symmetry). In other words
at ﬁxed α agents are able to recover the mean comfort level even in the inconsistent
case, provided strategy biases and comfort levels are uniform and the inconsistency
smaller than some critical value λ0c(α). This is illustrated in the left panel of Fig.
3 (lower curves). At the same time the transition between the phases in which the
mean comfort level can be retrieved, and the one where it cannot, coincides with the
ergodicity-breaking transition. At ﬁxed λ0 the system is ergodic for α > αc(λ0), and
non-ergodic for α < αc(λ0), with large volatilities for unbiased starts at low α, and
small volatilities for biased starts below the transition. Measurements of the volatility
for unbiased starts are shown in Fig. 3 (right panel, upper curves).

We now again turn to the eﬀects of heterogeneity on this system. In the present
case of inconsistent strategies one has to distinguish heterogeneities in the comfort levels
λi from those in the strategy biases ρi. As we will see below strategy biases and comfort
levels are no longer equivalent in the heterogeneous case, and it makes a crucial diﬀerence
whether heterogeneities are added to one or the other. In order to disentangle the eﬀects
of both we study the following cases:

(i) heterogeneous strategy biases at homogeneous comfort level (ρi =

0.05 randomly

±

(ii) homogeneous strategy biases at heterogeneous comfort levels (ρi ≡

0 and λi =

and λi ≡

0.5, diamonds in Fig. 3)

0.5

0.05, circles in Fig. 3)

±

0.5

(iii) strategy biases and comfort levels both heterogeneous (ρi =

±
0.05 with no correlation between ρi and λi, squares in Fig. 3)
0, λi ≡

(iv) strategy bias and comfort level both homogeneous (ρi ≡

±

0.05 and λi =

0.5, triangles in

Fig. 3)

(iv) is the case of homogeneous comfort levels and strategy biases as discussed above.
One ﬁnds that the transition as observed in (iv) is preserved only in case (i) where
comfort levels are homogeneous, but that it is absent in cases (ii) and (iii) where comfort
levels are heterogeneous. We illustrate this by plotting the mean attendance in the
stationary states for all cases in the left panel of Fig. 3. While the mean comfort
level λ0 = 0.5 is successfully retrieved at low α in (i), systematic deviations are present
irrespectively of α in (ii) and (iii). The right panel of the ﬁgure demonstrates that the
volatility remains low in cases (ii) and (iii) (heterogeneous comfort levels) at low α for
unbiased starts whereas σ2 diverges as α
0 for the systems (i) and (iv) where the
→
comfort level is uniform. Note also the good agreement of the numerical experiments
with the analytical theory in the ergodic regimes, up to small deviations due to ﬁnite-
size and equilibration eﬀects. Finally we also report simulations of a system with
0.5
homogeneous comfort levels and strategy biases, but shifted by an amount ∆ =
λ0 = 0 for all i (stars
with respect to (iv), i.e. we choose ρi ≡

0.5 and λi ≡
−

ρ0 =

−

Adapting to heterogeneous comfort levels

11

0.4

0.3

0.2

0.1

0

|

0

λ
−
>
A
<

|

−0.1

10−1

theory heterogeneous comfort levels
theory homogeneous comfort level
uniform strategy bias, heterogeneous comfort levels
strategy biases and comfort levels heterogeneous
strategy biases heterogeneous, comfort level uniform
strategy bias and comfort level uniform
strategy bias and comfort level uniform and shifted
(legend applies to both panels)

 

α

100

10−1

2
>
A
<
−
>
2
A
<
=
2
σ

 

α

100

10−1

100

(Colour on-line) Deviation of the mean attendance

Figure 3.
from the mean
comfort level λ0 (left), and ﬂuctuations of the attendance (right). Solid lines are from
theory, markers from simulations, unbiased starts, N = 1000 agents, run for 105 steps,
averaged over 10 samples. Triangles refer to a system with uniform strategy bias and
0.
uniform comfort level (ρi
Diamonds, circles and squares represent cases (i), (ii) and (iii) as detailed in the main
text. Vertical lines mark the phase transition for the model with uniform comfort level
λi

λ0 = 0.5 as found from the analytical theory.

0.5), stars to the shifted case ρi

A
i
h

0.5, λi

0, λi

≡ −

≡

≡

≡

≡

in Fig. 3). Results are identical to those of (iv), conﬁrming the translation invariance
against simultaneous uniform shifts of the comfort levels and strategy biases.

4.3. Fluctuating comfort levels

Finally, we consider comfort levels which ﬂuctuate in time in this section. Time-
dependent comfort levels present a form of disorder which is not quenched so that
the standard analytical tools are not straightforwardly applicable to this case. All
results presented in this section therefore rely on numerical simulations of the on-
line process (1). Fluctuating comfort levels are here implemented by drawing each
λi = λi(t) from a bimodal distribution at every time step with no correlations in time
λi(t) λi(t′) = 0). We here distinguish between collectively and individually
(λi(t)λi(t′)
−
ﬂuctuating comfort levels,

collectively ﬂuctuating:

individually ﬂuctuating:

λi(t)
λi(t)

≡

≡

λ0 + εζ(t),
λ0 + εζi(t).

Here ζ(t) and the ζi(t) are drawn at random at every time step from the set
with
equal probability, with no correlations over time (or between players in the individually
ﬂuctuating case). All strategy tables are generated at the beginning of the game, and
remain ﬁxed thereafter. We limit the discussion to the case of vanishing strategy biases

1, 1

{−

}

Adapting to heterogeneous comfort levels

12

consistent strategies

inconsistent strategies

 

101

100

10−1

σ2

101

100

10−1

σ2 

theory fixed heterogeneous comfort levels ε=1
theory fixed heterogeneous comfort levels ε=0.5
collectively fluctuating comfort levels ε=0.5
individually fluctuating comfort levels ε=0.5
collectively fluctuating comfort levels ε=1
individually fluctuating comfort levels ε=1
homogeneous fixed comfort level

10−2

10−1

100
α

101

10−2

10−1

theory  fixed heterogeneous comfort levels ε=0.5
theory fixed heterogeneous comfort levels ε=0.05
collectively fluctuating comfort levels ε=0.05
individually fluctuating comfort levels ε=0.05
collectively fluctuating comfort levels ε=0.5
individually fluctuating comfort levels ε=0.5
homogeneous fixed comfort level

100
α

101

Figure 4.
(Colour on-line). Game with resource levels ﬂuctuating in time. Left:
strategies consistent on average, right: inconsistent (see text for details). Simulations
are for N = 300 agents in the consistent case and N = 1000 agents for inconsistent
strategy assignments. Solid lines in both panels are for comparison only, and show
the theoretical lines for heterogeneous comfort levels at same spread ε, but ﬁxed in
time. Filled triangles are simulations of the model with time-independent homogeneous
comfort level.

(ρi = 0 for all i) and study models with consistent and with inconsistent strategies.
Consistency here refers to consistency as a time-average, i.e. to λ0 =
= ρ0 = 0
for the consistent case and to λ0 6

Results are shown in Fig. 4. We will discuss the cases of collectively and individually
ﬂuctuating comfort levels separately in the following, and focus on the volatility of the
attendance.

= 0 otherwise.

λi(t)

h

i

Collectively ﬂuctuating comfort

levels: the corresponding volatilities are
4.3.1.
indicated as solid circles and squares in Fig. 4, with the consistent case shown in the
left panel, and the inconsistent case in the right one. We show results for two diﬀerent
magnitudes ε in each case. For comparison we also display the analytical curves for ﬁxed
comfort levels (at the same degree of inconsistency as the simulations with ﬂuctuating
levels) as triangles in both panels. One thus concludes that a collectively ﬂuctuating
comfort level does not cause any noticeable eﬀect on the resulting volatility of the
system, but that the system instead behaves as if the collective comfort level was ﬁxed
at its time-average.

Individually ﬂuctuating comfort levels: the case of individually ﬂuctuating
4.3.2.
comfort levels appears to be crucially diﬀerent from the game with collectively
modulated comfort level. Results are displayed as open markers in Fig. 4, and one
ﬁnds that individually ﬂuctuating comfort levels reduce the volatility signiﬁcantly at
small and intermediate values of α as compared to the system with homogeneously ﬁxed

Adapting to heterogeneous comfort levels

13

or collectively ﬂuctuating levels. At larger values of α no such eﬀect is found. While
we cannot fully control equilibration in our experiments, due to apparently increased
relaxation times, our simulations seem to suggest that individually ﬂuctuating levels
reduce the volatility below the one observed in a system with ﬁxed heterogeneous
comfort levels of the same spread ε (indicated as lines in Fig. 4 for comparison). In
particular we ﬁnd that after suﬃciently long ε-dependent waiting times, the observed
volatility shows only little sensitivity to the numerical value of ε.

5. Geometrical interpretation of the phase transition

Our ﬁndings regarding the absence of the phase transition in El-Farol models with
heterogeneous comfort levels is interesting also from the point of view of statistical
mechanics of the MG. In this ﬁnal section we will discuss a geometrical interpretation
of the phase transition of the original MG and will make some suggestions of how it
may be possible to approach the problem of characterising MG models according to the
presence or absence of the phase transition marked by a diverging integrated response.
The update rules of most known versions of the MG are of the form qi(t + 1) =
qi(t) + ξµ(t)
i Aµ(t)[q(t)] (in the on-line formulation), with some global time-dependent
quantity Aµ(t)[q(t)] which depends on the information pattern µ(t) presented to the
agents at t and on the strategy score diﬀerences q(t) = (q1(t), . . . , qN (t)) of all agents.
A geometrical picture behind the transition of the standard MG can here be devised
as follows [16, 17]: due to the above update rule, the N-dimensional vector q(t) will
move in the space spanned by the αN vectors ξµ = (ξµ
N ), µ = 1, . . . , αN. We
will abbreviate this space by VαN (
in the following.
Since a number φN of agents can generally been shown to ‘freeze’ in MGs (where the
P
fraction of frozen agents φ = φ(α) depends on the details of the model), i.e. to employ
qi(t)
in the long-time limit, the eﬀective number
one strategy only and to have
φ(α)]N, so that q(t) can be thought of as having
of degrees of freedom is reduced to [1
[1
).
φ(α) then any perturbation on q(t) can be washed out by the dynamics.
If α > 1
φ(α) this may not be the case (as the dynamics is restricted to
If however α < 1
−
ξ
movements in VαN (
)), and initial conditions may become relevant. The point at
{
which ergodicity breaking occurs (and the integrated response diverges) can thus be
φ(αc), which is indeed fulﬁlled at the transition point of the
identiﬁed as αc = 1
standard MG, as illustrated in the inset of Fig. 5.

φ(α)]N free components and moving in the αN-dimensional vector space VαN (

1 , . . . , ξµ
c1, . . . , cαN ∈

| → ∞
−

µ=1 cµξµ

) =

−

−

−

R

αN

ξ

ξ

{

}

{

}

}

{

}

|

|

This picture breaks down whenever the update rules are not of a form which moves
the vector q(t) in the space spanned by the
q(t) is
, and one might not necessarily expect to see a
not a linear combination of the
transition with diverging integrated response in this case. Several examples can be
listed here. In grand-canonical MGs [10] one has update rules of the (schematic) form
κ, with a model parameter κ, and the transition is absent
qi(t + 1)
as soon as κ
= 0. MGs with ﬁnite score memory [11] have update rules of the form

, speciﬁcally if q(t + 1)

ξµ(t)
i Aµ(t)

qi(t) =

ξµ

ξµ

−

−

−

−

{

}

{

}

6
Adapting to heterogeneous comfort levels

14

1.0

0.8

0.4

0.2

0.6

φ

0.0

10−1
10−1

100

 

ε=1
ε=0.5
ε=0.2
ε=0.01

1.0

 

0.5

0.0

α

◗◗❦

100

◗
φ = 1

α

−

±

Figure 5. (Colour on-line) Fraction of frozen agents φ as a function of α. Main panel:
model with consistent strategies, and heterogeneous ﬁxed comfort levels (ρi
i
∀
ε randomly with ε = 1, 0.5, 0.2, 0.01 from top to bottom. Symbols are from
and λi =
simulations of the batch process (N = 300 agents, averages over 10 samples, run for
a minimum of 1000 batch steps, and longer if required for equilibration). Solid lines
are predictions of the analytical theory. Inset: standard MG (ε = 0), open symbols
represent simulations with tabula rasa initial conditions, full symbols biased starts.
Vertical line in the inset marks αc where αc = 1

φ(αc).

≡

0

−

ξµ(t)
i Aµ(t) (with 0

γ

≤

≤

−

−

−

γqi(t)

qi(t) =

qi(t+1)
1 deﬁning the inverse time-scale over
which scores are forgotten), and again the transition seems absent as soon as γ > 0. No
analytical results are available for games with ﬁnite score memory though. Finally the
transition marked by a diverging integrated response is also absent in MGs with impact
correction and with dilution, but instead preceded by a memory-onset transition (at
which χ remains ﬁnite).
In both cases one has qi(t + 1)
where
Aµ(t)
carries an explicit dependence on i, hence invalidating the above picture of q(t)
i
i si(t) in the model with impact
moving in VαN (
correction (with ν measuring the ability of the agents to correct for their own impact),
and Aµ
0, 1
and P (cij = 1) = c).

in the model with dilution (where cij ∈ {

). Speciﬁcally Aµ

i (t) = N −1/2

(ν/√N)ξµ

i Aµ(t)
ξµ(t)

i = Aµ(t)

j +ξµ
ωµ

j(cij/c)

qi(t) =

j sj(t)

−

−

−

ξ

}

{

{

}

}

i

In the model studied in this paper model one has Aµ

λi with λi the comfort
λ0 and the above
level of player i. Thus the quantity Ai does not depend on i if λi ≡
geometric interpretation holds and one is not surprised to ﬁnd the typical MG-transition.
this is no longer the case, the picture of the vector q(t) moving
For heterogeneous
ξ
in VαN (

) breaks down and the transition is absent.

i = Aµ

λi}

−

{

P

Having the listed examples in mind, one may thus speculate whether the property of
the update rules of the standard MG of restricting the increments of q(t) to VαN (
) is
a necessary condition for a phase transition with diverging integrated response to occur.
Note that such a dynamics would probably not be a suﬃcient condition for this type of

ξ

}

{

{

}

Adapting to heterogeneous comfort levels

15

−

transition to be present as additionally the condition α = 1
φ(α) has to be met at αc.
Interestingly we ﬁnd that in our model with heterogeneous comfort levels this condition
α for all tested values of α (see Fig. 5). Only as the
is never fulﬁlled, as φ(α) > 1
−
degree of heterogeneity ε approaches zero we do ﬁnd that φ(α)
α for α < αc
(where αc is the transition point of the MG with uniform comfort level, ε = 0). Similar
observations can be made for the GCMG. In order to test our hypothesis further, one
may want to look for a model in which the dynamics is not restricted to VαN (
),
but in which there is an α so that 1
φ(α) = α. The MG with ﬁnite score memory
might here be a candidate as no frozen agents are present at any α after long-enough
equilibration [11]. Unfortunately no analytical information on its phase behaviour is
available at present.

→

−

−

ξ

{

}

1

6. Concluding remarks

We have investigated a mathematical formulation of the El-Farol bar problem focusing
on the eﬀects of heterogeneity in the comfort levels and/or the biases of the agents’
strategies. Generalizing earlier results of [8] our main ﬁnding consists in the observation
that heterogeneity in the comfort levels even of inﬁnitesimal degree removes the phase
transition of the standard MG, while no such removal is observed for heterogeneous
strategy biases. This transition has also been shown to be present in an El-Farol bar
problem with homogeneous comfort level. There one ﬁnds a phase at low but non-zero
inconsistency of the strategies, in which the mean attendance converges to the comfort
level, and a second phase in which the comfort level cannot be retrieved due to too large
an inconsistency in the strategy vectors. In the phase of successful retrieval ﬂuctuations
of the attendance around the comfort level are large (for tabula rasa starts), but depend
on initial conditions. In the model with heterogeneous (i.e. agent-dependent) comfort
levels the attendance converges to the mean comfort level if and only if strategies are
fully consistent. This property is lost in the presence of heterogeneous comfort levels for
any degree of inconsistency at any ﬁnite α. At the same time models with heterogeneous
comfort levels appear to show low ﬂuctuations of the attendance, and the typical high-
volatility branches of the model with homogeneous levels are absent. Most interestingly
heterogeneous strategy biases at uniform comfort levels do not have the same eﬀect, the
transition is preserved. Hence we can strictly trace removal of the transition back to the
spread in comfort levels, and ﬁnd that the equivalence of comfort levels and strategy
biases of the homogeneous case does not carry over to the heterogeneous one.

We have also studied El-Farol games with temporally ﬂuctuating comfort levels
and ﬁnd that the behaviour of the volatility remains unchanged if the level ﬂuctuates
Individually ﬂuctuating levels, however, can reduce the
collectively for all players.
volatility signiﬁcantly.

Finally we have pointed out the similarities of the present model with other MG-
type systems with and without phase transitions, and have discussed a geometrical
interpretation of the updated rules, which may allow to characterise MG-models

Adapting to heterogeneous comfort levels

16

according to the presence or otherwise of the ergodicity breaking transition marked by
a singular integrated response. We hope that these suggestions may stimulate further
investigation of such models with a focus on their classiﬁcation according to the types
of their respective phase transitions.

Acknowledgements

This work was supported by the European Community’s Human Potential Programme
integrated
under contract HPRN-CT-2002-00319, STIPCO and by EVERGROW,
project No.
1935 in the complex systems initiative of the Future and Emerging
Technologies directorate of the IST Priority, EU Sixth Framework. TG would like
to thank David Sherrington for fruitful discussions.

References

UK)

Oxford UK)

[1] Challet D, Marsili M and Zhang Y-C 2005 Minority Games (Oxford University Press, Oxford UK)
[2] Coolen A C C 2005 The Mathematical Theory of Minority Games (Oxford University Press, Oxford

[3] Johnson N F, Jeﬀeries P and Hui PM 2003 Financial market complexity (Oxford University Press,

[4] Arthur W B 1994 Amer. Econ. Assoc. Papers Proc. 84 406
[5] Challet D, Zhang Y-C 1997 Physica A 246 407
[6] Johnson N F, Hui P M , Zheng D, Tai C W 1999 Physica A 269 493
[7] Yip K F, Hui P M, Lo T S, Johnson N F 2003 Physica A 321 318
[8] Challet D, Marsili M, Ottino G 2004 Physica A 332 469
[9] Challet D 2004 Physica A 344 24
[10] Challet D, Marsili M 2003 Phys. Rev. E 68 036132
[11] Challet D, De Martino A, Marsili M, Perez Castillo I 2006 JSTAT P03004
[12] De Martino A, Marsili M 2001 J. Phys. A: Math. Gen. 34 2525
[13] Galla T 2005 JSTAT P01002
[14] Heimel J A F and Coolen A C C 2001 Phys. Rev. E 63 056121
[15] Heimel J A F, De Martino A 2001 J. Phys. A: Math. Gen. 34 L539
[16] Heimel J A F 2001 PhD thesis King’s College London
[17] Marsili M, Challet D 2001 Phys. Rev. E 64 056138

Appendix: Equations describing the ergodic stationary states

t′) and similarly for Gtt and
Assuming time-translation invariance (i.e. Ctt′ = C(t
G′
tt′) and ﬁnite integrated response one follows the standard ansatz to proceed from the
eﬀective agent problem to explicit equations characterising the relevant persistent order
parameters of the ergodic stationary states. In our problem these are given by c, the
τ G′(τ ).
persistent part of the correlation function, and by χ =
Further details on this analysis relying on a separation of so-called ﬁckle and so-called
frozen agents can be found in [2].

τ G(τ ) and χ′ =

P

P

−

Adapting to heterogeneous comfort levels

The resulting 3

3 system of non-linear equations for

c, χ, χ′

then reads

×

c =

dλ R(λ)

c(λ), χ =

dλ R(λ)

χ(λ), χ′ =

dλ R(λ)λ

Z

Z

Z

with R(λ) the distribution from which the strategy biases λi are drawn and where
and

c(λ) given by

e

e

e

{

}
χ(λ)

e

χ(λ) =

(1 + χ)
α

erf

√α

 

2g(λ)(1 + χ) !

e
c(λ) = 1

erf

−

 

√α

p
2g(λ)(1 + χ) !

+

(1 + χ)2g(λ)
α

(cid:21)

,

(cid:20)

erf

× (

e

 

√α

p

2g(λ)(1 + χ) ! − s

2α

πg(λ)(1 + χ)2 exp

α
2g(λ)(1 + χ)2

−

(cid:16)

,

(18)

)

(cid:17)

and where g(λ) is the persistent part of the temporal correlations of the noise ηλ(t) in
the eﬀective agent problem which reads

p

g(λ) =

1 + c
(1 + χ)2 + 2

(ρ0 + χ′)2
(1 + χ)2 −

4λ

ρ0 + χ′
1 + χ

+ 2λ2 .

Following [2] the ﬂuctuations of the attendance can be approximated as

A2

2 =
A
i

− h

1
2

1 + c
(1 + χ)2 +

1
2

(1

c),

−

(cid:10)

(cid:11)

and the mean attendance level turns out to be
ρ0 + χ′
1 + χ

A
i

=

h

.

17

(16)

χ(λ)

e
(17)

(19)

(20)

(21)

