On Minimum Violations Ranking in Paired Comparisons

Juyong Park
Department of Physics and Center for the Study of Complex Systems,
The University of Michigan, Ann Arbor, Michigan 48109

Ranking a set of objects from the most dominant one to the least, based on the results of paired
comparisons, proves to be useful in many contexts. Using the rankings of teams or individuals
players in sports to seed tournaments is an example. The quality of a ranking is often evaluated
by the number of violations, cases in which an object is ranked lower than another that it has
dominated in a comparison, that it contains. A minimum violations ranking (MVR) method, as
its name suggests, searches speciﬁcally for rankings that have the minimum possible number of
violations which may or may not be zero. In this paper, we present a method based on statistical
physics that overcomes conceptual and practical diﬃculties faced by earlier studies of the problem.

I.

INTRODUCTION

(a)

(b)

(c)

1

2

3

2

1

3

1

3

2

5
0
0
2
 
t
c
O
 
7
2
 
 
]
h
p
-
c
o
s
.
s
c
i
s
y
h
p
[
 
 
1
v
2
4
2
0
1
5
0
/
s
c
i
s
y
h
p
:
v
i
X
r
a

(cid:0)

(cid:1)

a

n
2

set

A paired comparison of

of n objects
{O1, O2, . . . , On} is conducted by forming a pair of ob-
jects from the set and then deciding the better (stronger,
preferred, more dominant, etc., depending on the con-
text) one between the pair. If all
possible pairs are
compared, the comparison is called complete, and incom-
plete otherwise. In either case, it is commonplace to at-
tempt to rank the objects from the “best” (ranked high-
est, at ﬁrst place) to the “worst” (ranked lowest, at n-th
place). An example is competitive sports. In a typical
sports match, two teams or individuals play against each
other, and a “winner” and a “loser” are pronounced at
its conclusion.
It is well known that many sports, in-
cluding soccer, tennis, and American collegiate football,
maintain an oﬃcial ranking of teams or players based on
their performances in those matches. These rankings are
then often used to seed tournaments [1].

We can ﬁnd examples in other ﬁelds as well. In biol-
ogy, acts of aggression or submission of an animal towards
another motivates the study of “dominance hierarchies”
within the herds or communities of the animals [2, 3]. An-
other instructive example is a certain form of a decision-
making process.
Imagine a city council that, due to a
limited budget, can only approve a handful among all
the development projects that its constituents are de-
manding (improving schools, building new hospitals, re-
pairing highways, and so forth). Assume that the coun-
cil has conducted paired comparisons of the projects so
that it is known which the constituents prefer, given two
projects at a time [24]. What would be the optimal se-
lection of projects to go for? If the council is able to rank
the projects in such a way that no project gets ranked
lower than another that it has actually been preferred to,
it may just approve the projects starting from the top,
possibly escaping the blame for “messing up” priorities.
However, this may not always be possible because, in
paired comparisons, preferences are not necessarily tran-
sitive. Letting P1 > P2 mean that “Project P1 is pre-
ferred to P2” [25], we could certainly imagine a cycle of
preferences, e.g.
school > hospital, hospital > bridge,
and bridge > school. (The reason for this is that the cri-

FIG. 1: An illustration of the multiplicity of minimum viola-
tions rankings. Three objects (1, 2, 3) are depicted as labeled
nodes, and the rest of the system as a gray box. An arrow
points from the winner to the loser in a paired comparison.
In (a) and (b), we see that two unbeaten objects may change
places freely at the top, without aﬀecting the number of vi-
olations. However, being unbeaten does not guarantee being
at the top, as we see in (c) which has the same number of
violations as (a) and (b) have.

teria of comparison may depend on the speciﬁc objects
being compared [4].) If there is such a cycle, any ranking
will inevitably show at least one instance of a project be-
ing ranked lower than another that it has been preferred
to. This is called a violation or an inconsistency of
a ranking [5]. The next wisest strategy, then, would be
to come up with a ranking that has the minimum num-
ber of violations, which is called a minimum violations
ranking (MVR) of the paired comparison. Since the
number of violations cannot be negative, a zero-violation
ranking is a special case of MVR.

Therefore, the advantage of having an MVR is clear
(i.e., it is the best that one can do to minimize messed-
up priorities), with its meaning very well-deﬁned. Prac-
tically, however, the actual application of this method
to real situations has been limited for a couple of rea-
sons. First, the exact algorithm that ﬁnds an MVR of a
paired comparison is slow (O(n4)) [5]. This is reﬂected
in the fact that only recently has an MVR been found by

Jay Coleman for the American college football schedule
composed of more than a hundred teams [26], despite a
century-long obsession of dedicated fans in ﬁguring out
the “best” football school. Some of the previous stud-
ies on MVR have introduced some heuristic methods to
speed up the search, but have had to make sacriﬁces in
the ﬁnal results [4, 5, 6, 7]. Second, the issue of the
multiplicity of MVRs have been ignored in these stud-
ies. For example, if there are two “unbeaten” objects
(i.e. those that were not preferred against in the paired
comparison), then it cannot matter to us which one is
placed ﬁrst and which second, since both cases will give
the same number of violations. This is shown schemat-
ically in Fig. 1 (a) and (b). In the ﬁgure, three objects
(1, 2, 3) are drawn as labeled nodes that sit ah the top
three spots, and an arrow is drawn from the winner to
the loser of a paired comparison. To make matters more
complex, being unbeaten may even not guarantee be-
ing at the top among other unbeaten ones, as we see in
Fig. 1 (c).

This raises the question of fairness: going back to our
example of a city council, there can now arise a situa-
tion where P1 should get approved over P2 according to
one MVR, but the opposite is true according to another
MVR. The city council is back in a diﬃcult position of
having to decide on one, despite the fact that both MVRs
are equally qualiﬁed. Is there a way to break out of this
situation, without adding another ad hoc criterion? Here
we propose a natural solution, which is to treat all MVRs
as equally probable, and take the mean of each object’s
ranks. We then arrange the objects in the increasing or-
der of these mean ranks to obtain a ﬁnal standing. For
example, assume that the three rankings shown in Fig. 1
are the only possible MVRs of a some paired compari-
son. Then the mean ranks of the three objects (1, 2, 3)
are {1 + 2 + 1, 2 + 1 + 3, 3 + 3 + 2}/3 = {1.33, 2, 2.67},
from which we obtain the ﬁnal standings {1, 2, 3}. Al-
though this looks identical to Fig. 1(a), they must not
be confused — Fig. 1(a) merely represents one speciﬁc
MVR (among many) of the paired comparison.

While being straightforward and fair to all MVRs as
requested, this solution seems to ask us to be able to
ﬁnd all possible MVRs. Assume that m pairs have been
compared. Since there are n! diﬀerent rankings of n ob-
jects, there will be on average n!/m rankings that show a
particular number of violations. This can be a huge num-
ber, even for a common data set: in 2004, the American
college football schedule consisted of 117 schools playing
622 games, which gives 117!/622 ≃ 10190!

An exhaustive search through such a large state-space
is therefore clearly impossible, and so we are in need of
some sampling technique. As a matter of fact, we ﬁnd
ourselves in a very familiar territory: we are trying to
average certain observables (ranks of objects) over a set
of a large number of microstates (rankings), given a con-
straint (number of violations). These are the features of
a typical combinatoric problem that can be formulated
as a statistical physics model [9, 10, 11, 12], and that is

2

(a)

(b)
1

1

2

3

2

1

3

2

1

3
.
.
.

...

...

2

.
.
.
1

3

.
.
.
2

1

3

(c)

1/4 N

1/2 N

3/4 N

2

1

3

N

n-space

N-space

FIG. 2: There exists a natural mapping between (a) the
n-space and (b) the N -space. Each ranking in n-space is
mapped to
rankings with identical relative standings in
the N -space. The ranks in the n-space are linearly scaled into
(c) the mean ranks in the N -space according to Eq. (1)

N
n

(cid:1)

(cid:0)

precisely what we will do in the following section.

II. DEFINITION OF THE MODEL

We represent the results of a paired comparison of the
set of n objects as an n × n matrix A, called the ad-
jacency matrix. Its element Aij is equal to 1 if j has
beaten i in a comparison and 0 otherwise. In an incom-
plete comparison, there exist pairs of objects for which
Aij = Aji = 0. However, we require that the set of ob-
jects cannot be divided into two sets S1 and S2 such that
Aij = 0 and Aji = 0 for all Oi ∈ S1 and Oj ∈ S2. This
is necessary because if such a division is possible, objects
in S1 and S2 are completely independent, and therefore
it would be nonsensical to try to rank them on a single
linear scale.

A. Expansion of the State Space

The deﬁnition of a ranking of n objects we have used so
far is an ordering of the n objects from the ﬁrst place to
the last (n-th). More precisely, we assign to each object
an integer rank ri (1 ≤ ri ≤ n), such that the ranking
r = {r1, r2, . . . , rn} is a permutation of {1, . . . , n}. (Al-
though we do not allow ties in a ranking, they can be
produced in the ﬁnal standings if the mean ranks of mul-
tiple objects are equal.) We can also visualize this as n
objects occupying n ordered slots, which we will call the
n-space. This is illustrated in Fig. 2(a) for n = 3. It
will be shown later that it is more convenient to work in
a larger N -space, where the same n objects occupy n
slots among N (N ≫ n) ordered slots. The ranking in
the N -space is similarly deﬁned as s = {s1, s2, . . . , sn},
where si is the label of the slot occupied by object i. This
is illustrated in Fig. 2(b).

We can deﬁne a natural mapping between a ranking
in the n-space and rankings in the N -spacethat have the

same relative standings of the objects (i.e., in terms of
being higher or lower than others), hence the same num-
ber of violations. Under this mapping, each ranking in
= N n/n! rank-
the n-space corresponds to exactly
ings in the N -space. Therefore, Fig. 2(a) gets mapped
onto Fig. 2(b).

N
n

(cid:0)

(cid:1)

Now, consider an object ranked r in some ranking in
the n-space. Its mean rank ˜s(r), averaged over the map-
ping of the ranking in the N -space, is given by

˜s(r) =

x ·

N

Xx=1

xr−1
(r − 1)!

·

(N − x + 1)n−r

(n − r)! (cid:30)(cid:18)

N n
n! (cid:19)

≡ r

N
n + 1

L(N, n, r).

Numerical studies strongly suggest that L(N, n, r) =
1+O(n/N ) → 1 for N ≫ n. If this is true (and for all the
examples that we will be presenting in the ﬁnal part of
this paper, it is), Eq. (1) is telling us that ˜s(r) is identical
to r up to a constant prefactor. Thus we conclude that
averaging the rank of an object over any set of rankings
(for example, of all MVRs) in the n-space is equivalent
to averaging its ranks over the set of their corresponding
rankings in the N -space (Fig. 2(c)) under the mapping.
We will be working exclusively in the N -space from now
on.

B. Statistical Mechanical Formulation

It is well known that the canonical ensemble formal-
ism greatly facilitates calculations of physical quantities
of a statistical mechanical system such as that of gaseous
particles, while giving identical predictions as the mi-
crocanonical ensemble formalism. The essence of the
canonical ensemble formulation lies in its ﬂexibility on
which microstates to consider in evaluating the partition
function; typically, all states of diﬀerent energies E are
allowed, whereas in the microcanonical formalism only
states with a speciﬁc energy are allowed [13].

We will formulate our problem in a completely analo-
gous fashion: we include all microstates (rankings) of any
possible number of violations (i.e., not just the MVRs)
to form an ensemble. As usual, the ﬁrst step is to assign
the probability P (s) to each ranking s. The fairest, most
unbiased way to do this is to maximize the entropy

S = −

P (s) ln P (s),

(2)

Xs

subject to certain constraints given by the mean val-
ues of the observables [14, 15]. Our observables are the
objects’ ranks {s1, s2, . . .} and the number of violations
V (s), which can be written as

V (s) =

Θ(sj − si)Aij ≡

ΘijAij ,

(3)

Xij

Xij

3

where Θ(sj − si) ≡ Θij is the Heaviside stepfunction.
Therefore, the constraints are given as

si =

siP (s) and V =

V (s)P (s).

(4)

Xs

Xs

Using the Lagrange multiplier method on S, we get the

following solution for P (s):

P (s) =

e~α·s+βV (s)
Z

≡

e−(H0(s)+H1(s))
Z

,

(5)

(1)

where ~α = {α1, . . . , αn} and β are the Lagrange multi-
pliers, and H0 ≡ −~α · s = −
i αisi and H2 ≡ −βV
are called Hamiltonians. The normalizing factor Z is the
P
usual partition function, given by

Z =

P (s) =

−(H0(s)+H1(s)).

e

(6)

Xs

Xs

Since we stipulated that all rankings with a same value
of V be given equal probability, P (s) of Eq. (5) can be a
function of V only. Therefore, all values of α are actually
equal to 0. They are formally retained in Eq. (5) because
they will serve as the diﬀerentiation variables when cal-
culating si from Eq. (4):

si =

siP (s) =

= −

,

(7)

Xs

~α=0

~α=0

1
Z

∂Z
∂αi (cid:12)
(cid:12)
(cid:12)
(cid:12)

∂F
∂αi (cid:12)
(cid:12)
(cid:12)
(cid:12)

where F = − ln Z is the free energy. On the other hand,
β will be a negative real number because we are trying
to minimize (i.e. discourage the formation of) violations.
Furthermore, the MVR limit is given by β = −∞.

The model is now fully deﬁned. Before we proceed, let
us brieﬂy discuss the advantages of having this theoret-
ical model and solutions to it. The ﬁrst advantage was
mentioned earlier, that our formulation guarantees a fair
sampling of the phase space by deﬁnition, whereas exact
or heuristic methods merely attempt to ﬁnd one speciﬁc
MVR of a paired comparison. The second advantage is
that, although Eq. (5) lends itself to Monte Carlo sim-
ulations in a straightforward manner (if it can easily be
done for β = −∞ at all) for numerical results, having an
analytical solution by which we can calculate s for any
paired comparison would be more convenient, possibly
requiring no simulation eﬀort at all.

III. PERTURBATION EXPANSION

As of now, we are not aware of a general, closed-form
solution for Eq. (6), and therefore for Eq. (7). However,
in statistical physics there are a number of sophisticated
approximation methods available, such as the perturba-
tion expansion technique which forms the basis of the
solution developed here.

First, we re-express the partition function Z:

Z =

−(H0+H1) = Z0

e

Xs

e−H0
Z0

−H1

e

= Z0

P0(s)e

−H1 = Z0he

−H1 i,

Xs

Xs

(8)
s e−H0 , and h· · · i denotes the average of
where Z0 =
a quantity in the ensemble of H0, in which ranking s is
given a probability P0(s) = e−H0/Z0 = e~α·s/Z0. Thus we
are treating H1 as the perturbation to H0.

P

H0 has a very simple meaning: object i is ranked at
si with probability Pi(si) ∝ eαisi , independent of any
other object. This is also reﬂected in the fact that Z0 is
a product of independent functions of αi:

Z0 =

−H0(s) =

e

Xs

n

N

eαisi

i αisi =

e

P

Yi=1
eαi (1 − eN αi)
1 − eαi

Xsi=1
n

Yi=1

Xs
n

Yi=1

=

≡

z(αi). (9)

Therefore, we have

Pi(si) =

eαisi
z(αi)

=

eαi(si−1)(1 − eαi)
1 − eN αi

.

(10)

Now, with H1 = −βV , Z and F = − ln Z become

Z = Z0heβV i = Z0(cid:18)

1 +

∞

βl
l!

hV li

,
(cid:19)

F = − ln Z0 − ln

1 +

(cid:18)

hV li

(cid:19)

≡ F0 + F1.

∞

Xl=1
βl
l!

Xl=1

Therefore, Eq. (7) can be written as

si = −

+

∂F0
∂αi
(cid:20)
1
z(αi)

∂z(αi)
∂αi

∂F1
∂αi (cid:21)(cid:12)
(cid:12)
(cid:12)
(cid:12)

~α=0

−

=

αi=0

~α=0

∂F1
∂αi (cid:12)
(cid:12)
(cid:12)
(cid:12)

≡

N + 1
2

+ ∆i.

(12)

(cid:12)
(cid:12)
(cid:12)
(cid:12)

We can understand this intuitively. The ﬁrst term
(N + 1)/2 comes from H0, in which an object can as-
sume any rank among 1, . . . , N with uniform probability
1/N (with α = 0). (N + 1)/2 is none other its mean, the
midpoint. The second term ∆i is, then, the “shift” from
this midpoint, caused by correlations with other objects
via V .

A. Evaluation of hV li

Eq. (11) tells us that in order to evaluate Z or F ,
ij Θij)li (with a tacit

we need to calculate hV li = h(

P

4

understanding that the summation is done over (i, j) for
which Aij = 1).

Let us look at some examples. First, consider hV i:

hV i = h

Θiji =

hΘij i.

(13)

Xij

Xij

Since Θij is equal to 1 when si < sj and 0 otherwise,
hΘiji is simply equal to the probability that si < sj. We
can easily calculate it using Eq. (10):

hΘiji =

Pi(si)Pj (sj) =

Pi(si)Pj (sj)

Xsi<sj
1 − eαi − eN αj

=

1 − eαi(eαj + eN αi (1 − eαj ))
(cid:0)
(cid:1)

(1 − eN αi)(1 − eN αj )(1 − eαi+αj )

.

N

N

Xsi=1

Xsj =si

(14)

2 + 1

2N ≃ 1

The validity of this can be checked quickly by noting its
limiting value for αi, αj → 0, which is 1
2 . This
is as expected, since if we randomly position two teams
at any position with uniform probability (this is what
α → 0 means), there will be 1
2 chance that one will be
ranked higher than the other.
Next, consider hV 2i =

kmhΘijΘkmi. We have
ij
three types of products ΘijΘkm, depending on the rela-
P
tion between (i, j) and (k, m):

P

1. (i, j) = (k, m) so that ΘijΘkm = Θ2

ij = Θij, since

(11a)

Θ is either 1 or 0.

2. (i, j) and (k, m) share no index, so that i 6= k, m
and j 6= k, m. We shall call this a disconnected
product.

(11b)

3. (i, j) and (k, m) share one index, for example j = k
and i 6= m. We shall call this a connected product.

Terms of the ﬁrst kind will add up to produce one
hV i from hV 2i. In the second case, since the positions
of i and j are independent of those of k and m, we can
easily see that hΘijΘkmi = hΘijihΘkmi. The third case is
more interesting, in which the two Θs are “connected” via
j = k, and so its mean does not factor like the previous
kind. We can see this explicitly by calculating its average
in a manner similar to Eq. (14):

hΘij Θjmi =

Pi(si)Pj (sj)Pm(sm)

Xsi<sj <sm
sj

N

N

Xsi=1

Xsj =1

Xsm=sj

=

Pi(si)Pj(sj)Pm(sm).

(15)

Its limiting value for αi, αj, αm → 0 is 1
4 , as it
would have been if the product was disconnected like the
previous one.

6 not 1

Therefore, hV 2i can be written, schematically, as

Since φ1 = V , Z of Eq. (11a) now becomes

hV 2i = hV i +

ΘijΘkm

+

ΘijΘkm

X

X

disconnected
| {z }

connected
| {z }

(16)

The reason for stressing the distinction between discon-
nected and connected products will become clear in later
sections.

Here, let us study the general implication of Θ2 = Θ on
V l. Assume that we have applied the rule exhaustively
to every term of V l. Then V l will have become a linear
combination of all possible products of 1, 2, . . . , l distinct
Θs, namely,

V l =

alkφk,

∞

Xk=1

where φk is the sum of all possible products of k distinct
Θ’s, and {alk} are appropriate integer coeﬃcients. For
example, V 3 can be written as

V 3 = (Θ12 + Θ34 + Θ56 + · · · )3
= 6(Θ12Θ34Θ56 + · · · )

+6(Θ12Θ34 + Θ12Θ56 + Θ34Θ56 + · · · )
+(Θ12 + Θ34 + Θ56 + · · · )

= 6φ3 + 6φ2 + φ1 = a3,3φ3 + a3,2φ2 + a3,1φ1.

The meaning of alk is clear: it is the number of ways
of selecting one Θ from each V such that the selection
of size l includes k distinct types of Θs. Now, consider
a particular set of k distinct Θs. The number of ways of
choosing l elements from the set, without the constraint
that each of k types must be present at least once, is
simply k × k × · · · = kl. This is also the sum of the
number of ways that the selection contains 1, 2, . . . , k dis-
tinct types of Θ from the set. This leads to the relation

k
m=1

k
m
(cid:0)

alm = kl or, equivalently,
(cid:1)

P

al,k = kl −

k−1

Xm=1

k
m(cid:19)

(cid:18)

al,m.

(19)

Multiplying each side by zl/l! and summing them over
l = 1, 2, . . . , ∞ gives the recursion relation for its gener-
ating function gk(x) =

∞
l=1 xlalk/l!:

gk(z) = (ekz − 1) −

gm(z).

(20)

P

k−1

Xm=1

k
m(cid:19)

(cid:18)

5

(21)

Z
Z0

= 1 +

hV li = 1 +

∞

∞

βl
l! (cid:20)

Xl=1

alkhφki

(cid:21)

= 1 +

alk

hφki = 1 +

(eβ − 1)khφki

∞

Xl=1
∞

βl
l!
∞

(cid:20)

Xl=1

Xk=1
∞

βl
l!

(cid:21)

≡ 1 +

ηlhφli.

Xl=1

Xk=1
∞

Xk=1

This looks as if we have replaced hV li and β in Eq. (11)
with hφli and η ≡ (eβ −1). But what we have here is more
than a facelift: thanks to η, the evaluation of hφli up to
any ﬁnite l gives us an inﬁnite-order expansion in terms
of β. This is analogous to the “partial resummation”
in ﬁeld theory. The MVR limit under this change of
variables is η = −1.

(17)

B. Expansion of the Free Energy

Using Eq. (21), F1 of Eq. (11b) can also be written as

a power series of η:

F1 = − ln

1 +

(cid:18)

ηlhφli

= −

ηlfl,

(22)

(cid:19)

∞

Xl=1

∞

Xl=1

(18)

where its coeﬃcients fl can be determined by the Tay-

lor series

− ln(1 + x) = −x +

−

+ · · · .

(23)

x2
2

x3
3

For example, the ﬁrst three f ’s are

f1 = hφ1i,

f2 = hφ2i −

hφ1i2
2

,

f3 = hφ3i − hφ2ihφ1i +

(24)

hφ1i3
3

.

Since φl is a sum of products of Θs, this tell us that F1
is a linear combination of products of their unperturbed
averages. For instance, it has terms made up of powers
i.e., hΘij i from hφ1i, hΘiji2 from hφ1i2, and
of hΘij i:
so forth, which all add up to a quantity ψ[Θij], which
we will call the contribution of Θij to the free energy
Eq. (22):

ψ[Θij] = −ηhΘiji +

hΘiji2 −

hΘiji3 + · · · . (25)

η2
2

η3
3

This implies gk(z) = (ez−1)k by mathematical induction,
∞
l=1 zlal,1/k! = (ez −
with the initial condition g1(z) =
1) and al1 = 1. This is the solution to the same result
previously reported by us in [16].

P

Similarly, we can deﬁne ψ[ΘijΘkm](Θij 6= Θkm), which
is the sum of the products of averages of products in-
volving both Θij and Θkm. They are a bit trickier than
Eq. (25): we have hΘijΘkmi from hφ2i, hΘijihΘkmi from

(a)

(b)

(a)

(b)

j

i

i

j

l

k

i

i

j

j

k

m

l

m

m

(c)

(d)

(c)

6

(a)
FIG. 3: Diagrams representing Θ and their products.
Θij is visualized as an arrow pointing to i from j. Products
of multiple Θs are drawn as juxtaposition of arrows. (b) A
connected product ΘijΘjm is drawn as a connected diagram.
(c) A connected diagram representing ΘikΘkjΘlkΘlm. (d) A
disconnected diagram representing ΘikΘkj Θlm.

hφ1i2/2 in f2, hΘijΘkmihΘij i from hφ2ihφ1i in f3, and so
forth. These add up to give

ψ[ΘijΘkm] = −η2(hΘijΘkmi − hΘij ihΘkmi)

+ η3(hΘij Θkmi − hΘijihΘkmi)(hΘij + Θkmi)
(26)
+ · · · .

Before we proceed any further, let us introduce the di-
agrammatic representation of products of Θs, shown in
Fig. 3. Here, a single Θij is drawn as an arrow pointing
to i from j (Fig. 3(a)). A juxtaposition of two or more
arrows will be understood as a product of the correspond-
ing Θs, such as Fig. 3(b) which stands for ΘijΘjm. Note
that the diagram for the connected product ΘijΘjm is
forms a single component). Exam-
also connected (i.e.
ples of connected and disconnected diagrams (i.e., prod-
ucts) of more than two Θs are shown in Fig. 3(c) and
(d).

Therefore, evaluating the free energy F1 means calcu-
lating the contributions ψ of all possible diagrams, and
Eqs. (25) and (26) are such examples calculated up to
O(η3). However, noting that any power of hΘij i could
have only come from Taylor-expanding the logarithm of
ηhΘij i contained in the ηhφ1i Eq. (21), we can easily see
that ψ[Θij] has to be

.
1 + ηhΘij i
ψ[Θij] = − ln
(cid:1)
(cid:0)
Taylor-expanding this to O(η3) indeed gives Eq. (25).

(27)

The situation is similar for ψ[ΘijΘkm]. It could have
1+ηhΘij+Θkmi+
only come from Taylor-expanding − ln
η2hΘij Θkmi
of Eq. (22), but this also produces powers
(cid:0)
solely of hΘiji or hΘkmi, which we now know are ψ[Θij]
(cid:1)
and ψ[Θkm]. Therefore, we have

1 + ηhΘij + Θkmi + η2hΘij Θkmi
ψ[ΘijΘkm] = − ln
(cid:1)
(cid:0)
1 + ηhΘij + Θkmi + η2hΘijΘkmi
(1 + ηhΘij i)(1 + ηhΘkmi)

−ψ[Θij] − ψ[Θkm]

= − ln

(cid:20)

FIG. 4: Connected diagrams composed of up to three arrows.

Now, assume that ΘijΘkm is disconnected,

i.e.
hΘijΘkmi = hΘijihΘkmi. Then ψ[ΘijΘkm] vanishes.
This means that only connected products of two Θs con-
tribute to the free energy. In fact, this is generally true
for products of any number of Θs: only connected prod-
ucts, whose diagrams are also connected, make nonzero
contributions to the free energy. Therefore, Fig. 3(c) con-
tributes; Fig. 3(d) does not.

Now we have an iterative prescription for calculating
ψ of any diagram: from the negative of the logarithm of
1 plus the terms that represent itself and its subgraphs
in Eq. (21), subtract the ψ’s of the subgraphs. As an
example, let us use this to evaluate ψ[ΘijΘkmΘlq]. The
subgraphs of ΘijΘkmΘkm are Θij, Θkm, Θlq, ΘijΘkm,
ΘkmΘlq and ΘlqΘij. Therefore,

ψ [ΘijΘkmΘlq]
1 + ηhΘij + Θkm + Θlqi + η2hΘij Θkm
= − ln
(cid:0)

+ΘkmΘlq + ΘlqΘiji + η3hΘijΘkmΘlqi
(cid:1)
−ψ[ΘijΘkm] − ψ[ΘkmΘlq] − ψ[ΘlqΘij]
−ψ[Θij] − ψ[Θkm] − ψ[Θlq].

(29)

This also vanishes unless ΘijΘkmΘlq is connected.

Our strategy is now clear: identify all connected dia-
grams (composed of up to some desired number of Θ),
add up their contributions ψ, and perform the diﬀerenti-
ation of Eq. (12) to obtain s.

IV. THIRD-ORDER EXPANSION

Following the strategy stated in the previous section,
we perform a third-order evaluation of F1. Here, “third
order” means evaluating ψ for all connected products of
up to three Θs. (Remember that F1 itself is of inﬁnite
order in η and β). Their diagrams are shown in Fig. 4.

.

(cid:21)
(28)

0 0 0 0
1 0 0 0
0 1 0 0
0 1 0 0

(31)

2

1

3

4

(a)

(b)

7

N

/
)
k
n
a
r
 
n
a
e
m

(

0.2

0.3

0.4

0.5

0.6

0.7

TABLE I: A simple binary comparison dataset.

Since Eq. (12) involves diﬀerentiation with respect to a
single αi, we realize that a practical method to evaluate
averages of the diagrams in ways similar to Eqs. (14) and
(15) is to ﬁrst set all α’s to 0 except for αi. This reduces
all Pj(sj) to 1/N except for Pi(si), simplifying the cal-
culation. Now we get two functions of αi for Fig. 4(a) –
one for i at the top and another for i at the bottom —
for instance. We then multiply each by the number of
such diagrams present in the data set (the total “losses”
and “wins” of the object i) to obtain the total shift of
the diagram to si. For example, the shift ∆loss due to a
loss by i is

∆loss = −

∂ψ[Θij]
∂αi

(cid:12)
(cid:12)
(cid:12)
1
(cid:12)
1 + ηhΘiji

αi,αj =0
∂hΘiji
∂αi

=

= −

N η
6(2 + η)

η=−1
−→

(cid:12)
αi,αj =0
(cid:12)
(cid:12)
N
(cid:12)
12

.

=

∂ ln(1 + ηhΘij i)
∂αi

(cid:12)
(cid:12)
(cid:12)
(cid:12)

αi,αj =0
(N 2 − 1)η
6(2N + (N + 1)η)

= −

(30)

This has a positive value for η < 0(β < 0), which is
anticipated since we expect a loss to increase one’s mean
rank. In the MVR limit of η = −1(β = −∞), it reduces
to N/12. This is rather a neat result: if an object i has
Li losses, its mean rank is shifted upwards by Li × N/12.
By symmetry, a win by i would decrease its mean rank
by N/12.

Performing similar calculations for higher-order dia-
grams gives us functions of η not unlike that of Eq. (30),
which we do not show here. We can, however, easily guess
them in a couple of cases: the ﬁrst diagram of Fig. 4(b)
cannot shift the mean rank of the node in the middle,
since it is being “pushed” equally up and down. The
same goes for all nodes in the ﬁnal diagram of Fig. 4(c),
and our calculations indeed give 0 for both cases.

Next, we will apply the results obtained here to several

examples of paired comparisons.

Example 1: Simple Tree

As the ﬁrst example, take a simple comparison whose
adjacency matrix is given in Table I. It can be visualized
as Fig. 5(a). We can intuitively see that object 1 must
be ranked at the top, followed by 2, while 3 and 4 should
be tied (since they are topologically indistinguishable)
at last to obtain a minimum number of violations (0).
In order to use our expansion results, we must count
the connected subgraphs involving each object, which are

x 1

x 2

x 1

1

1

1

FIG. 5: (a) The visualization of Table I. (b) connected sub-
graphs involving object 1.

Object 1
Object 2
Objects 3 and 4

-1

-0.8

-0.6

-0.4

-0.2

0

η=(e

β−1)

FIG. 6: The normalized rankings of objects depicted in
Fig. 5(a). The perturbation expansion (solid lines) is exact in
this case, and agrees perfectly with Monte Carlo simulation
results (shapes).

shown in Fig. 5(b) for object 1. After repeating this
process for all objects, we obtain the following solutions
for s:

s1(η)
N
s2(η)
N
s3(η)
N

=

=

=

4η3 + 25η2 + 50η + 30
5(η + 2) (η2 + 6η + 6)
3η3 + 25η2 + 50η + 30
5(η + 2) (η2 + 6η + 6)
3η3 + 30η2 + 80η + 60
10(η + 2) (η2 + 6η + 6)

=

s4(η)
N

.

(32)

Since we have considered all subgraphs appearing in
Fig. 5(a), these must be exact. An excellent agreement
with Monte Carlo simulation results for the entire range

8

Object 1
Object 2
Object 3
Object 4
Object 5

TABLE II: The adjacency matrix for the tournament 5 in [5].

0 0 0 0 0
1 0 0 0 0
1 1 0 0 0
1 1 1 0 0
1 1 1 1 0

1

2

5

3

4

(33)

0

0.2

0.4

0.6

0.8

N

 
/
 
)
k
n
a
r
 
n
a
e
m

(

FIG. 7: The visualization of Table II.

of η in Fig. 6 conﬁrms this.

A closer inspection of Fig. 6 tells us that the mean
ranks are (N + 1)/2 = N/2 for η = 0(β = 0) as
expected, while s1 and s2 begin to diverge noticeably
around η = −0.6(β = −0.9). Since objects 1 and 2 are
indistinguishable on the ﬁrst order (they both have a
win-loss diﬀerential of 1), this has to be the point where
second and third-order diagrams begin to contribute sig-
niﬁcantly. The MVR solutions at η = −1 also agree with
Eq. (1).

Larger data sets will certainly contain fourth- or
higher-order connected diagrams, and therefore our
third-order expansion will be an approximation. How-
ever, it is still interesting to see how much valid our
third-order expansion can be as a true approximation.
We study this issue with the following examples.

Example 2: 5-Player Round-Robin Tournament

A round-robin tournament is a complete paired
comparison. Ali et al. studied the minimum violations
ranking problem of the 5-player round-robin tournament
(with
= 10 comparisons) using a couple of heuris-
tic methods on the nine distinct conﬁgurations they had
identiﬁed [5]. One of those tournaments (labeled 5 in
their paper) is given in Table II, and visualized in Fig. 7.
The correct MVR standings should be {1, 2, 3, 4, 5}.

5
2
(cid:0)
(cid:1)

Fig. 8 shows the perturbation and Monte Carlo simu-
lation results. We see that there exists a wide range of η
(between −0.8 and 0) in which the perturbation agrees
with the simulation well within 2% of N and predicts the
relative standings correctly, whereas closer to η = −1 it
behaves in a haphazard way and gives incorrect stand-
ings. This latter behavior is certainly due to the missing
higher-order diagrams. We ﬁnd almost identical behav-

-1

-0.8

-0.6

-0.4

-0.2

0

η=(e

β−1)

FIG. 8: The third-order perturbation expansion (solid lines)
and Monte Carlo simulation results (shapes) for the tourna-
ment in Table II. There is a wide range of η for which the
perturbation gives a correct prediction of standings, followed
by a region of haphazard behavior near η = −1 caused by
missing higher-order diagrams.

iors for the eight other tournaments as well: the pertur-
bation solution is stable and predicts correct standings
including ties for a wide range of η, while near η = −1 it
fails.

Compare this to the heuristic methods of Ali et al.,
which merely succeeds in ﬁnding one speciﬁc MVR for
each the tournament. Furthermore, strangely enough,
they regard the emergence of “tied ranks” as an undesir-
able feature of a method in their study. We believe to
the contrary: it is only fair to give tied ranks to topolog-
ically indistinguishable players, which our method does
explicitly.

Example 3: American Collegiate Football

As a ﬁnal example, we consider a large-scale data set
mentioned earlier, American collegiate football. In the
year 2004, 117 universities played a total of 622 games in
the regular season. Ranking of colleges based on the out-
comes of those games is of particular interest, because
schools ranked high in the “oﬃcial” ranking (currently
determined by a combination of human polls and several
computer algorithms) get invited to play in prestigious
post-season bowl games, while the top two schools get to
play in the national championship game [27]. Invitations
to these games are not only honorable, but bring lots
of practical beneﬁts to the schools, including much pub-
licity through the media, ﬁnancial compensations worth
millions of US dollars, and an increase in applications

N

(cid:144)
L
k
n
a
r
n
a
e
m

H

0

0.25

0.5

0.75

1

9

violations
non-violations

0.25

0.2

0.15

n
o
i
t
c
a
r
f

0.1

0.05

0

-1

-0.8

-0.6

-0.4

-0.2

0

Η=HeΒ-1L

FIG. 9: The third-order perturbation expansion for 117
American college football teams in 2004.

from prospective students [17].

Due to the small number of games (∼ 11) a school
plays in a season compared to the number of possible op-
ponents (∼ 120), a simple win-loss diﬀerential is a hope-
lessly insuﬃcient measure of a team’s strengths. There-
fore, the oﬃcial computer algorithms as well as the hun-
dreds of rankings schemes devised by the fans of the sport
employ various criteria that their inventors or developers
deem necessary and important in order to assess the col-
lege teams’ strengths [8, 18, 19, 20].

One often evaluates the quality of an algorithm by
counting the violations in the ﬁnal ranking it pro-
duces [21]. Any MVR will perform the best in this re-
spect by deﬁnition, but in a recent study a particular
MVR mentioned earlier was shown to have performed as
well as or better than other ranking methods in other
tests as well [28]. Again, this study was done for one
particular MVR, and so it would be an interesting topic
for future research to study how s from Eq. (12) perform
in those tests.

In this paper, though, let us concentrate on our third-
order perturbation expansion. In Fig. 9 we see that it
shows a behavior quite similar to the one we have seen in
the previous example: we have a smooth, well-behaved
range (though narrower, −0.3 <
∼ η < 0), followed by a
region of large ﬂuctuations.

In the smooth range, the number of violations is consis-
tently 115, short of the 53 found by Coleman. Neverthe-
less, it is interesting that the violation decreases rapidly
to about a third of 311 (half the number of games) ex-
pected at η = 0 as soon as η is tuned away from it (at
η = −0.001), and stays that way over the entire region.
The relative standings of the teams also change very lit-
tle, suggesting that they may still reﬂect the correct ones

0.1

0.2

0.3
differences in (mean rank)/N

0.4

0.5

FIG. 10: The normalized distributions for the diﬀerences in
s/N between object pairs across violations and non-violations,
for η = −0.3. This shows that violations occur between object
pairs that are generally closer in their mean ranks.

to some degree. If this is the case, then the violations
must be occurring between teams that are closer in s
so that adding more diagrams are likely to swap these
pairs ﬁrst, causing only limited changes to the standings.
In Fig. 10, we show the distributions of the separation
in s/N between the 115 pairs of teams across violations
and the 622 − 115 = 507 pairs that are not, for η = −0.3.
We clearly see that s/N are closer across a violation on
average. Actually, by directly swapping the positions of
pairs of schools across a violation in the increasing order
of their separation in s/N , we were able to reduce the
number of violations by another 20 — 17% of the origi-
nal 115 — down to 95. (In order to lower it further, we
need to swap objects in a more complicated order. In this
sense, a higher-order expansion is precisely what tells us
how to do that.)

V. SUMMARY AND DISCUSSION

In this paper, we have formulated the problem of min-
imum violations rankings in paired comparisons as a sta-
tistical physics model, analogous to the canonical ensem-
ble theory of systems of particles. This formulation en-
sured that all conﬁgurations with the same number of
violations were assigned equal statistical weights in the
ensemble, overcoming the conceptual diﬃculties faced by
earlier studies of the problem.

We then developed a diagrammatic perturbation tech-
nique for evaluating the free energy F , from which we
could obtain the mean ranks s of each object via diﬀeren-
tiation. Making use of the property Θ2(x− y) = Θ(x− y)
of the Heaviside step function, we were able to ﬁnd an it-
erative prescription for evaluating inﬁnite-order contribu-

tions of ﬁnite diagrams (i.e., partial resummation). The
fact that we only needed to consider connected diagrams
greatly facilitated the expansion, and a third-order per-
turbation expansion was carried out explicitly.

We were able to use these results on any type of paired
comparison data set, having only to count the number of
connected subgraphs it contained. We studied three ex-
ample data sets. In the ﬁrst example, the perturbation
expansion had to be exact, and we conﬁrmed this by
comparing it to a Monte Carlo simulation. In the latter
two examples we were interested in the performance of
the expansion as a true approximation. We witnessed the
existence of a region in which the perturbation expansion
was stable and well-behaved.
It was followed by large
ﬂuctuations near η = −1 due to the missing higher-order
diagrams. The reliability of this stable, smooth range as
the predictor of the true mean minimum violations s at
η = −1 would depend on how high an order we perform
the expansion into, but already on third order we were
able to predict the relative standings perfectly for the
5-player round-robin tournament, and to some reason-
able degree for the 117-player American college football
schedule.

We propose several directions for future research based
on this work. First, performing the expansion into higher
orders is always an obvious possibility. Second, develop-

10

ing faster algorithms or programming more eﬃcient codes
for counting the connected subgraphs is desirable. Third,
a generalization of the theory to cases where Aij > 1 (i.e.,
allowing multiple comparisons or considering the weight
of a comparison, such as the score diﬀerence in a sports
match) is allowed would be welcome. We hope that these
eﬀorts will prove helpful in the practical application of
this method to other large-scale data sets.

Lastly, we note that the entire perturbation technique
developed in this paper is a signiﬁcant improvement over
the one introduced earlier in [22] in the context of the
theory of exponential random graphs. We are hoping to
see more developments in that area as well.

Acknowledgments

The author would like to thank Mark Newman,
Jay Coleman, Elizabeth Leicht, Petter Holme, Gourab
Ghoshal, Henry Kim and Willemien Ketz for helpful dis-
cussions, and the Santa Fe Institute Complex Systems
Summer School 2005 for the opportunity to pursue this
interdisciplinary project. This research was supported
by the National Science Foundation under grant number
DMS-0405348.

[1] R. T. Stefani, Journal of Applied Statistics 24, 635

[16] J. Park and M. E. J. Newman, Physical Review E 72

(1997).

(2005).

[2] B. J. Cole, Science 212, 83 (1981).
[3] D. F. Lott, Zeitschrift f¨ur Tierpsychologie 49, 418 (1979).
[4] M. G. Kendall, Biometrics (1955).
[5] I. Ali, W. D. Cook, and M. Kress, Management Science

[17] K. Dunnavant, The Fifty-Year Seduction (Thomas

Dunne Books, New York, 2004).

[18] J. P. Keener, SIAM Review 35, 80 (1993).
[19] D. A. Harville, Journal of the American Statistical Asso-

32, 660 (1986).

ciation 98, 17 (2003).

[6] M. G. Kendall, Rank Correlation Methods (Charles Grif-

ﬁn and Company, Ltd., 1962), 3rd ed.

[7] H. de Vries, Animal Behaviour 55, 827 (1998).
[8] J. Park and M. E. J. Newman, Journal of Statistical Me-

[20] T. Callagan, P. J. Mucha, and M. A. Porter, Notices of
the American Mathematical Society 51, 887 (2004).

[21] J. Martinich, Interfaces 32, 85 (2002).
[22] J. Park and M. E. J. Newman, Physical Review E 70

chanics (in press) (2005).

(2004).

[9] H. Nishimori, Statistical Physics of Spin Glasses and In-
formation Processing : An Introduction (Oxford Univer-
sity Press, 2001).

[10] S. Mertens, Physical Review Letters 81, 4281 (1998).
[11] T. Sasamoto, T. Toyoizumi, and H. Nishimori, Journal

of Physics A 34, 9555 (2001).

[12] F. F. Ferreira and J. F. Fontanari, Journal of Physics A

31, 3417 (1998).

[13] H. B. Callen, Thermodynamics and an Introduction to
Thermostatistics (Wiley, New York, 1985), 2nd ed.

[14] E. T. Jaynes, Physical Review 108, 171 (1957).
[15] E. T. Jaynes, Probability Theory:

the Logic of Science

(Cambridge University Press, 2003).

[23] S. T. Goddard, Management Science 29, 1384 (1983).
[24] A paired comparison is known to be eﬀective when people
are asked to show a preference of one alternative over
another [23]

[25] Note that most concepts introduced here translate natu-
rally to other contexts (sports, animals, etc.). For exam-
ple, T1 > T2 in sports would imply “team T1 has beaten
team T2 (in a match)”.

[26] www.unf.edu/∼jcoleman/minv.htm
[27] www.bcsfootball.org
[28] rsport.netorn.ru/cf/rankrank.htm

