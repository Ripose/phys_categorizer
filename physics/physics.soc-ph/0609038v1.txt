Detecting the traders’ strategies in Minority-Majority games and

real stock-prices.

V. Alﬁ,1, 2, ∗ A. De Martino,3 L. Pietronero,1, 3 and A. Tedeschi3

1Universit`a “La Sapienza”, Dip. di Fisica,

P.le A. Moro 5, 00185, Rome, Italy.
2Universit`a “Roma Tre”, Dip. di Fisica,

V. della Vasca Navale 84, 00146, Rome, Italy.
3Istituto dei Sistemi Complessi - CNR,

via dei Taurini 19, 00185, Roma, Italy.

Abstract

Price dynamics is analyzed in terms of a model which includes the possibility of eﬀective forces

due to trend followers or trend adverse strategies. The method is tested on the data of a minority-

majority model and indeed it is capable of reconstructing the prevailing traders’ strategies in a

given time interval. Then we also analyze real (NYSE) stock-prices dynamics and it is possible to

derive an indication for the the “sentiment” of the market for time intervals of at least one day.

PACS numbers: 89.75.-k, 89.65+Gh, 89.65.-s, 05.20.-y

Keywords: Complex systems, Time series analysis, Financial data, Economic systems

6
0
0
2
 
p
e
S
 
5
 
 
]
h
p
-
c
o
s
.
s
c
i
s
y
h
p
[
 
 
1
v
8
3
0
9
0
6
0
/
s
c
i
s
y
h
p
:
v
i
X
r
a

∗E-mail address: Valentina.Alﬁ@Roma1.infn.it

1

I.

INTRODUCTION

The simplest representation of price dynamics is usually considered as a simple Random

Walk (RW). It is easy to realize, however, that many important deviations ara also present.

The most studied are the problem of the “fat tails” (in the distribution of price returns),

the volatility clustering and various other elements related to the non stationarity of the

process [1, 2]. The arbitrage condition implies that no simple correlations can be present.

A large eﬀort is therefore devoted to the identiﬁcation of complex correlations of various

types. These correlations arise from the collective behavior of traders, which lastly, deﬁne

the price.

interval.

In this perspective a simple classiﬁcation of trading strategies can be made in terms of

trend followers or trend adverse. Usually these diﬀerent strategies are taken as input in

models which represent the behavior of traders.

Here we would like to consider the complementary point of view. Namely, given a time

series, is it possible to identify, from the data, the strategies of the traders? In order to

address this question we use a new approach which is based on a RW plus a force which

depends on the distance of the price from some suitable moving average [3, 4]. This idea is

that, with such an analysis, one can identify the “sentiment” of the market in a given time

In this paper, we ﬁrst perform some statistical tests of the method to clear its signal

to noise ratio. Then we apply the method to time series generated by a minority-majority

model [5]. This is an important test because, in this case, one knows the prevailing strategy

of the traders. The results are rather encouraging because the method can indeed identify

these strategies. Finally we apply the method to real stock prices data of the NYSE and

the preliminary results show that it is possible to derive statistically signiﬁcant information

on the prevailing trading strategy for a single day or larger time periods.

II. THE EFFECTIVE POTENTIAL MODEL

In recent papers [3, 4] has been introduced the idea the the stock-price dynamics can be

inﬂuenced by a moving average of the price itself in the previous time steps. Hence, at every

time step t, one can introduce a moving average of the previous M time steps:

2

 15
 15

 10
 10

 5
 5

 0
 0

-5
-5

-10
-10

-15
-15

)
)
t
t
(
(

P
P

 0
 0

 100
 100

 300
 300

 400
 400

 500
 500

 200
 200

t
t

FIG. 1: Example of a model of price dynamics (in this case a simple RW) together with its moving

average deﬁned as the average over the previous 50 points. The idea is that the distance of the

price from its moving average can lead to repulsive (blue arrows) or attractive (red arrows) eﬀective

forces.

PM (t) =

M −1

1
M

P (t

τ )

−

τ =0
X
In Fig. 1 is plotted the time evolution of a RW with Gaussian random noise together

with the moving average of the price.

One can investigate if there could be a relation between the next price increment P (t +

1)

P (t) and the diﬀerence P (t)

PM (t).

−
The simplest assumption is to adopt a linear dependence:

−

P (t + 1)

P (t)

P (t)

PM (t)

−

∝

−

In this case, the price dynamics can be described in terms of a RW with the existence of

a linear force. This force can be either repulsive or attractive depending on the sign of the

constant of proportionality between P (t + 1)

P (t) and P (t)

PM (t).

−
Therefore, the dynamical equations of the price is a RW with the presence of a force that

−

is the gradient of a quadratic potential Φ [4].

(1)

(2)

P (t + 1) = P (t)

b(t)

Φ

P (t)

PM (t)

+ ω(t)

(3)

d
dP (t)

−

(cid:16)

3

−

(cid:17)

 

 

 

Repulsive Potential
Repulsive Potential
Repulsive Potential

Attractive Potential
Attractive Potential

Flat Potential

 20
 20
 20

 15
 15
 15

 10
 10
 10

 5
 5
 5

 0
 0
 0

-5
-5
-5

-10
-10
-10

-15
-15
-15

-20
-20
-20

 0
 0
 0

)
)
)
t
t
t
(
(
(

P
P
P

 50
 50
 50

 100
 100
 100

 150
 150
 150

 200
 200
 200

t
t
t

FIG. 2: Time evolution of the price described by Eq. 3. Three diﬀerent behavior are plotted. The

red lines represents the time evolution of a RW in a repulsive quadratic potential while the blue

line is in an attractive quadratic potential. The green line is the case of ﬂat potential (simple

RW). The parameters are ﬁxed to M = 20 and b =

±
diﬀusion) in the case of repulsive (attractive) potential.

1. We can observe an over diﬀusion (under

where ω(t) corresponds to a random noise with unitary variance and zero mean. PM (t)

is the moving average described in Eq. 1.

The potential Φ together with the pre-factor b(t) describe the interaction between the

price and the moving average. In simple assumption of a linear force [4], Φ results to be

quadratic:

φ

P (t)

PM (t)

=

P (t)

PM (t)

−

(cid:16)

−

(cid:17)

(cid:16)

2

.

(cid:17)

We can simulate a process whose dynamical stochastic equation is given by Eq. 3.

The time evolution of the “price” of such a process, is shown in Fig. 2, where we can

observe three cases in which the potential is attractive, repulsive and constant (simple RW).

From this simulation, one can reconstruct the force of the process plotting P (t + 1)

P (t)

as a function of P (t)

PM (t). Then, integrating from the center, one can obtain the potential.

−

In Fig. 4 are shown the potential obtained from a simulation of the process described

in Eq. 3 in the case of attractive force for various values of M. We can observe that the

potentials have an amplitude (that is the slope of the linear force) which depends on M. In

[4] is shown that such a dependence can be eliminated rescaling the potential by a factor

(4)

−

(M

1).

−

4

 2.5
 2.5
 2.5
 2.5

 2
 2
 2
 2

 1.5
 1.5
 1.5
 1.5

 1
 1
 1
 1

 0.5
 0.5
 0.5
 0.5

l
l
l
l

a
a
a
a
i
i
i
i
t
t
t
t
n
n
n
n
e
e
e
e
t
t
t
t
o
o
o
o
P
P
P
P

 100
 100
 100
 100

)
)
)
)
1
1
1
1
-
-
-
-
M
M
M
M

(
(
(
(
*
*
*
*
l
l
l
l
a
a
a
a
i
i
i
i
t
t
t
t
n
n
n
n
e
e
e
e
t
t
t
t
o
o
o
o
P
P
P
P

 80
 80
 80
 80

 60
 60
 60
 60

 40
 40
 40
 40

 20
 20
 20
 20

M=20

M=30

M=40

M=50

M=20
M=30
M=40
M=50

5

 0
 0
 0
 0
-15
-15
-15
-15

-10
-10
-10
-10

-5
 0
 0
-5
 0
-5
 0
-5
P(t)-PM(t)
P(t)-PM(t)
P(t)-PM(t)
P(t)-PM(t)

 5
 5
 5
 5

 10
 10
 10
 10

 15
 15
 15
 15

FIG. 3: The plot shows the shapes of the quadratic attractive potentials deﬁned by Eqs. 3 and 4.

We can see that the amplitude of the potentials depend on the choice of the parameter M .

 0
 0
 0
 0
-15
-15
-15
-15

-10
-10
-10
-10

-5
 0
 0
-5
 0
-5
 0
-5
P(t)-PM(t)
P(t)-PM(t)
P(t)-PM(t)
P(t)-PM(t)

 5
 5
 5
 5

 10
 10
 10
 10

 15
 15
 15
 15

FIG. 4: The diﬀerent potential plotted in Fig. 3 are re-plotted scaling the potential with the factor

(M

−

1). We can see that in this way we obtain a good data collapse.

In Fig. 4 are shown the potentials plotted in Fig. 3, rescaled by the factor (M

1). Indeed

−

we can observe a good data collapse.

This idea of assuming a linear force in Eq. 3 has been tested on real data. In [4] a series

of data from the Yen-Dollar exchange rates have been analyzed. The potential analysis for

the case of the Yen-Dollar exchange rates indeed leads to the observation of rather quadratic

potentials.

Anyhow, other kind of force can be considered. For example one can suppose that the

price dynamic could depend only on the sign of the diﬀerence P (t)

PM (t). In this case an

−

interesting model is represented by the following dynamic for a RW with only up and down

steps [3].

p(

) = 1/2 + ǫ1

for P (t)

PM (t) > 0

(

p(

) = 1/2

↓
) = 1/2

p(

ǫ1

ǫ2

−

−

(

p(

) = 1/2 + ǫ2 .

↑

↑

↓

−

−

for P (t)

PM (t) < 0

(5)

(6)

This model implies a tendency of destabilization (or stabilization) depending on the signs

Normal RW

Asymmetric Repulsive RW
Asymmetric Repulsive RW

of ǫ1 and ǫ2.

 40
 40

 20
 20

 0
 0

 

 

-20
-20

)
)
t
t
(
(

P
P

-40
-40

-60
-60

-80
-80

 0
 0

 0

-0.5

-1

-1.5

l

a
i
t
n
e
t
o
P

-2

-2.5

-3

-15

 200
 200

 400
 400

 600
 600

 800
 800

 1000
 1000

-10

-5

 0

 5

 10

 15

t
t

(a)

RW with asymmetric drift

P(t)-PM(t)

(b)

FIG. 5: In ﬁgure (a) is plotted the time evolution the price whose dynamics is described by Eqs. 5

and 6, compared with the time evolution of a simple RW. In ﬁgure (b) is plotted the shape of the

potential obtained analyzing the data plotted in (a). We can see a piecewise linear shape because

the relative model depends only on the sign of the diﬀerence P (t)

PM (t). The slope of the two

−

lines of the potential depends on the parameters ǫ1 and ǫ2.

The potential analysis for this case leads to a piecewise linear potential in which the

slopes are related to ǫ1 and ǫ2. The potential will be asymmetric if ǫ1

= ǫ2. In Fig. 5(a) and

5(b) are shown the time evolutions of a price whose dynamical equations is given by Eqs. 5

and 6 in the case of asymmetric repulsive potential, and the relative shape of the potential.

In order to test this model, we have considered an agent based model and we have

performed the potential dynamics on the time series of the theoretical price that comes from

6

6
the simulations. In the next section we are going to describe the speciﬁc rules of the agent

based model we have considered.

III. APPLICATION AND TEST ON AN AGENT BASED MODEL

It is instructive to analyze the eﬀective potential scenario in agent-based models, where

the price process is not deﬁned explicitly but only through the aggregate choices of a group

of traders. The simplest and most studied framework from a statistical physics perspective

is that of Minority Games [6, 7], in which each of N agents must decide at every (discrete)

time step whether to buy (ai(t) = 1) or sell (ai(t) =

1) an asset. The resulting price process

is determined by the decisions of all agents through the “excess demand” A(t) =

N
i=1 ai(t).

−

In particular, neglecting liquidity eﬀects for the sake of simplicity, one can write that

P

which amounts to deﬁning the (log-)price as P (t) =

t′<t A(t′).

P (t + 1)

P (t) = A(t),

−

It is clear that an agent’s trading behavior will depend on his expectations about the
future price increment A(t), denoted by Ei[A(t)]. For example, it has been argued [8] that

P

if

Ei[A(t)] = ψiA(t

1) + (1

ψi)A(t

2),

−

−

−

agent i behaves as a trend-follower for ψi > 1 (correspondingly he perceives the market

as a Majority Game with payoﬀ πi(t) = ai(t)A(t)), while he behaves as a fundamentalist for

0 < ψi < 1 and plays a Minority Game with payoﬀ πi(t) =

ai(t)A(t).

−

Let us now consider an agent who forms expectations according to (2). It is easy to see

that such an agent is described by a generalization of (8). Indeed, a direct calculation shows

that (2) corresponds to

(7)

(8)

(9)

Agents thus tend to discount events further back in time and give larger weight to re-

cent price changes when estimating the future returns. Clearly, such an agent has a more

Ei[A(t)]

M −1

∝

τ =1
X

M

τ

−
M

A(t

τ ).

−

7

complicated reaction pattern than a pure Minority or Majority Game player and will be

described by a payoﬀ function that accounts for the possibility of behaving diﬀerently in

diﬀerent market regimes.

Models of this type have been introduced recently and appear to be an ideal testing

ground to verify the emergence of the eﬀective potential scenario in a microscopic setting.

Speciﬁcally, we have tested it on a model in which agents may switch from a trend-following

to a fundamentalist attitude (and vice-versa) depending on the market conditions they

perceive, which was introduced in Ref.

[5]. We refer the reader to the literature for a

detailed account of the model’s deﬁnition and properties. In a nutshell, it describes agents

who strive to maximize the payoﬀ

−
(t) = A(t)/√N is the normalized excess demand. The idea is that for small price

A

πi(t) = ai(t)[

(t)

(t)3],

ǫ
A

(10)

where

A

≃

movements (A(t)

0) agents perceive the game as a Majority Game as they try to identify

proﬁtable trends. However when price movements become too large, the game is perceived

as a Minority Game, i.e. agents expect the price to revert to its fundamental value. As in

most Minority Games, agents have ﬁxed schemes (‘strategies’) to react to the receipt of one

of P possible external information patterns and learn from experience to select the strategy

and, in turn, the action ai(t) that is more likely to deliver a positive payoﬀ. A realistic

dynamical phenomenology is obtained in a whole range of values of the model parameter ǫ

when the number N of players is large compared to the amount of information available to

them P (this is measured by a parameter α = P/N, see [5] for details).

In Fig. 6 is shown the time evolution of P (t) for a game with parameters α = 0.05 and

ǫ = 1. This choice of parameters corresponds to be in the range in which the competition

between trend followers and contrarians is stronger. In fact, in Fig. 6, we can observe some

“ordered” periods, where A(t) is small and well deﬁned trends in the price dynamics appear,

but also “chaotic” periods where the dynamics of the price is dominated by the contrarians.

In Fig. 6 we have identiﬁed two periods in which the diﬀerent behaviors of the agents are

well deﬁned and we have used these periods as dataset for our potential analysis.

In Fig. 7 are plotted the potentials obtained performing the eﬀective potential analysis

with M = 20. We can observe that, when the market is dominated by contrarians, we obtain

an attractive potential. This shape of the potential reproduce the agents’ tendency to keep

8

 2500

 2000

 1500

)
t
(

P

 1000

 500

 0

 0

minority regime

majority regime

 10000

 20000

 30000

 40000

 50000

t

FIG. 6: The time evolution of P (t) for a minority-majority game with ǫ = 1 and α = 0.05 is

shown. We can observe the alternation of diﬀerent regimes. In the graph are indicated two periods

by means of arrows. In the minority regime the price remains near to its fundamental value, while

in the majority regime appears a well deﬁned trend.

l

a
i
t
n
e
t
o
P

 8

 7

 6

 5

 4

 3

 2

 1

 0

-1

-20

l

a
i
t
n
e
t
o
P

 8

 6

 4

 2

 0

-2

-4

-20

-15

-10

-5

 0

 5

 10

 15

 20

-15

-10

-5

 0

 5

 10

 15

 20

P(t)-PM(t)

(a)

P(t)-PM(t)

(b)

FIG. 7: The potential analysis with M = 20 for the two periods indicated in Fig. 6 is shown. The

analysis for the minority region leads to an attractive (even though not really quadratic) potential.

Instead, analyzing the majority region we found a repulsive potential.

the price near its “fundamental” value. We can also note that this potential is not perfectly

quadratic as in model described in Eqs. 3 and 4. In fact, plotting diﬀerent potentials with

various values of M we can not obtain a data collapse scaling the potentials with the factor

(M

1). In case of market dominated by trend followers, we can observe the presence of well

−

9

deﬁned trends (bubbles and crashes). In this case the agents try to follow the trends and

the price tends to go away from his fundamental value. In this case we obtain a repulsive

potential.

progress.

Therefore, the potential analysis is able to detect the agents’ behavior based on micro-

scopic rules only analyzing the data of a macroscopic variable, P (t).

From the viewpoint of modeling real markets, it will be very interesting to introduce

an agent based model in which agents perform their decision (buy/sell) by considering

their expectations about the next price increment using Eq. 9, with diﬀerent constant of

proportionality and diﬀerent values of the ’memory’ M and not on the basis of a set of

given strategies (as in the minority game framework). Work along these lines is currently in

IV. RESULTS FOR REAL STOCK PRICES FROM NYSE

(a)

(b)

(c)

FIG. 8: The time evolution of three stock index (CLF, ITU and TOL) is shown. The time is

expressed in tick and correspond to one trading day.

For our potential analysis we consider as database the price time series of all the trans-

actions of a selection of 20 NYSE stocks. These have been selected to be representative and

with intermediate volatility. This corresponds to volumes of 105

106 stocks exchanged per

−

day. We consider 80 days from October 2004 to February 2005.

The time series we consider are by a sequential order tick by tick. This is not identical to

the price value as a function of physical time but we have tested that the results are rather

insensitive to this choice.

10

 0.007

 0.006

l

a
i
t
n
e
t
o
P

 0.005

 0.004

 0.003

 0.002

 0.001

 0

-0.001

-0.6

l

a
i
t
n
e
t
o
P

 0.004

 0.002

 0

-0.002

-0.004

-0.006

-0.008

-0.01

-0.012

-0.014

 0.002

 0.0015

l

a
i
t
n
e
t
o
P

 0.001

 0.0005

 0

-0.0005

-0.4

-0.2

 0

 0.2

 0.4

-0.8

-0.6

-0.4

-0.2

 0

 0.2

 0.4

 0.6

-0.4

-0.3

-0.2

-0.1

 0

 0.1

 0.2

 0.3

P(t)-PM(t)

(a)

P(t)-PM(t)

(b)

P(t)-PM(t)

(c)

FIG. 9: The eﬀective potential method has been applied to the price evolution of the three stocks

plotted in Fig. 8. We can see that the eﬀective potential are rather asymmetric and not all

quadratic. The potential in (a) seems quadratic and attractive in the central part but has asym-

metric tails. The potential in (b) and (c) are not quadratic. In particular the potential in b is

asymmetric and looks like piecewise linear as in Fig. 5(b). The potential in (c) is ﬂat like a simple

RW potential.

The statistical properties of these kind of data are relatively homogeneous within the time

scale of a trading day but the large jumps of the prices between diﬀerent days prevent the

extension of the analysis to large times [9]. So we focus our potential analysis considering

the stock-prices ﬂuctuations within a trading day. In Fig. 8 are plotted the time evolutions

of three stock indexes in a trading day.

If we perform the eﬀective potential method for a trading day of a given stock, we found

shapes of the eﬀective potential that are very irregular and often asymmetric. In Fig 9 are

plotted the results obtained for the data plotted in Fig 8. We can see that the shapes of

the potentials are not always quadratic. The potential in Fig. 9(a) it seems rather quadratic

and attractive while in Fig. 9(b) has a piecewise linear shape similar to the potential plotted

in Fig. 5(b). The potential in Fig 9(c) seems ﬂat as one expects from a simple RW model.

Instead, if we consider some average over a long period (80 trading days) of the potentials

obtained for a single day, the resulting potentials seems to be quadratic as in [4]. In Fig. 10

are shown the average shape of the potential for two stock indexes (BRO and PG). We can

observe a rather quadratic shape for the potential. In Fig. 10(a) the potential is quadratic

11

 0

-5e-06

-1e-05

l

a
i
t
n
e
t
o
P

-1.5e-05

-2e-05

l

a
i
t
n
e
t
o
P

 1.6e-05

 1.4e-05

 1.2e-05

 1e-05

 8e-06

 6e-06

 4e-06

 2e-06

 0

-0.2

-0.1

 0

 0.1

 0.2

-0.2

-0.1

 0

 0.1

 0.2

P(t)-PM(t)

(a)

P(t)-PM(t)

(b)

FIG. 10: This plot shows the average shape of the potential over 80 trading days for two diﬀerent

stock indexes (BRO and PG). The shape is quite quadratic and symmetric, and in (a) is repulsive

while in (b) attractive.

and repulsive while for the index PG the potential is attractive, as we can see in Fig. 10(b).

[1] R. N. Mantegna and H.E. Stanley. An Introduction to Econophysics: Correlation and Com-

plexity in Finance. Cambridge University Press, New York, NY, USA, 2000.

[2] J. P. Bouchaud and M. Potters. Theory of Financial Risk and Derivative Pricing: From

Statistical Physics to Risk Management. Cambridge University Press, 2003.

[3] V. Alﬁ, F. Coccetti, M. Marotta, , L. Pietronero, and M. Takayasu. Hidden forces and ﬂuctu-

ations from moving averages: A test study. Physica A, 2006. In printing.

[4] M. Takayasu, T. Mizuno, and H. Takayasu. Potentials of unbalanced complex kinetics observed

in market time series. 2005. E-print http://arxiv.org/abs/physics/0509020.

[5] A. Tedeschi A. De Martino, I. Giardina and M. Marsili. Generalized minority games with

adaptive trend-followers and contrarians. Phys. Rev. E 70 025104(R), 2004.

[6] A. Cavagna. Irrelevance of memory in the minority game. Phys. Rev. E 59 R3783, 1999.

[7] D. Challet and Y.-C. Zhang. Emergence of cooperation and organization in an evolutionary

game. Physica A 246 407, 1997.

[8] M. Marsili. Market mechanism and expectations in minority and majority games. Physica A

12

299 93, 2001.

[9] V. Alﬁ, F. Coccetti, M. Marotta, A.Petri, and L.Pietronero. Roughness and ﬁnite size eﬀect in

the nyse stock-price ﬂuctuations. Eur. Phys. J. B, 2006. In printing.

13

